<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OASF Card Generator</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --background: hsl(248, 50%, 97%);
            --foreground: hsl(30, 14%, 16%);
            --muted: hsl(210, 40%, 96%);
            --muted-foreground: hsl(215, 16%, 47%);
            --popover: hsl(0, 0%, 100%);
            --popover-foreground: hsl(30, 14%, 16%);
            --card: hsl(0, 0%, 100%);
            --card-foreground: hsl(30, 14%, 16%);
            --border: hsl(220, 13%, 91%);
            --input: hsl(220, 13%, 91%);
            --primary: hsl(210, 73%, 52%);
            --primary-foreground: hsl(211, 100%, 99%);
            --secondary: hsl(210, 40%, 96%);
            --secondary-foreground: hsl(222, 84%, 5%);
            --accent: hsl(153, 70%, 44%);
            --accent-foreground: hsl(153, 85%, 95%);
            --destructive: hsl(0, 84%, 60%);
            --destructive-foreground: hsl(60, 9%, 98%);
            --ring: hsl(30, 14%, 16%);
            --radius: 0.5rem;

            /* Custom OASF colors */
            --primary-light: hsl(210, 100%, 95%);
            --accent-hover: hsl(153, 61%, 39%);
            --danger: hsl(0, 84%, 60%);
            --danger-hover: hsl(0, 79%, 53%);
            --danger-light: hsl(0, 93%, 94%);
            --warning: hsl(43, 96%, 56%);
            --warning-light: hsl(48, 96%, 89%);
            --container-bg: hsl(0, 0%, 100%);
            --input-bg: hsl(0, 0%, 100%);
            --border-hover: hsl(215, 20%, 82%);
            --shadow-sm: 0 1px 2px 0 hsl(0, 0%, 0%, 0.05);
            --shadow: 0 1px 3px 0 hsl(0, 0%, 0%, 0.1), 0 1px 2px -1px hsl(0, 0%, 0%, 0.1);
            --shadow-lg: 0 10px 15px -3px hsl(0, 0%, 0%, 0.1), 0 4px 6px -4px hsl(0, 0%, 0%, 0.1);
            --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .dark {
            --background: hsl(222, 84%, 5%);
            --foreground: hsl(210, 40%, 98%);
            --muted: hsl(217, 32%, 17%);
            --muted-foreground: hsl(215, 20%, 65%);
            --popover: hsl(222, 84%, 5%);
            --popover-foreground: hsl(210, 40%, 98%);
            --card: hsl(222, 84%, 5%);
            --card-foreground: hsl(210, 40%, 98%);
            --border: hsl(217, 32%, 17%);
            --input: hsl(217, 32%, 17%);
            --primary: hsl(210, 73%, 52%);
            --primary-foreground: hsl(211, 100%, 99%);
            --secondary: hsl(217, 32%, 17%);
            --secondary-foreground: hsl(210, 40%, 98%);
            --accent: hsl(153, 70%, 44%);
            --accent-foreground: hsl(153, 85%, 95%);
            --destructive: hsl(0, 63%, 31%);
            --destructive-foreground: hsl(210, 40%, 98%);
            --ring: hsl(212, 95%, 83%);

            /* Custom OASF dark colors */
            --primary-light: hsl(210, 95%, 12%);
            --accent-hover: hsl(153, 61%, 39%);
            --danger: hsl(0, 84%, 60%);
            --danger-hover: hsl(0, 79%, 53%);
            --danger-light: hsl(0, 63%, 16%);
            --warning: hsl(43, 96%, 56%);
            --warning-light: hsl(43, 89%, 18%);
            --container-bg: hsl(222, 84%, 5%);
            --input-bg: hsl(217, 32%, 17%);
            --border-hover: hsl(215, 20%, 25%);
            --shadow-sm: 0 1px 2px 0 hsl(0, 0%, 0%, 0.3);
            --shadow: 0 1px 3px 0 hsl(0, 0%, 0%, 0.3), 0 1px 2px -1px hsl(0, 0%, 0%, 0.3);
            --shadow-lg: 0 10px 15px -3px hsl(0, 0%, 0%, 0.3), 0 4px 6px -4px hsl(0, 0%, 0%, 0.3);
        }
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            background-color: var(--background);
            color: var(--foreground);
        }
        .extension-tile {
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        .extension-tile:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        .extension-tile::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            opacity: 0;
            transition: var(--transition);
        }
        .extension-tile:hover::before {
            opacity: 1;
        }
        .extension-card {
            transition: var(--transition);
            border-left: 4px solid hsl(var(--primary));
        }
        .extension-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            font-size: 12px;
            margin-bottom: 8px;
        }
        .a2a-icon {
            background: linear-gradient(135deg, hsl(269, 100%, 78%) 0%, hsl(213, 89%, 64%) 100%);
        }
        .model-icon {
            background: linear-gradient(135deg, hsl(338, 95%, 75%) 0%, hsl(269, 100%, 78%) 100%);
        }
        .mcp-icon {
            background: linear-gradient(135deg, hsl(26, 91%, 65%) 0%, hsl(338, 95%, 75%) 100%);
        }
        .prompt-icon {
            background: linear-gradient(135deg, hsl(133, 72%, 59%) 0%, hsl(169, 84%, 61%) 100%);
        }
        .observability-icon {
            background: linear-gradient(135deg, hsl(179, 78%, 78%) 0%, hsl(326, 78%, 85%) 100%);
        }
        .evaluation-icon {
            background: linear-gradient(135deg, hsl(35, 77%, 62%) 0%, hsl(179, 78%, 78%) 100%);
        }
        .card {
            background-color: var(--card);
            color: var(--card-foreground);
            border: 1px solid var(--border);
            border-radius: calc(var(--radius) - 2px);
            box-shadow: var(--shadow-sm);
        }
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: calc(var(--radius) - 2px);
            font-size: 0.875rem;
            font-weight: 500;
            transition: var(--transition);
            cursor: pointer;
            border: none;
            text-decoration: none;
        }
        .btn-primary {
            background-color: hsl(var(--primary));
            color: hsl(var(--primary-foreground));
            padding: 0.5rem 1rem;
        }
        .btn-primary:hover {
            background-color: hsl(var(--primary) / 0.9);
        }
        .btn-secondary {
            background-color: hsl(var(--secondary));
            color: hsl(var(--secondary-foreground));
            padding: 0.5rem 1rem;
        }
        .btn-secondary:hover {
            background-color: hsl(var(--secondary) / 0.8);
        }
        .btn-destructive {
            background-color: hsl(var(--destructive));
            color: hsl(var(--destructive-foreground));
            padding: 0.5rem 1rem;
        }
        .btn-destructive:hover {
            background-color: hsl(var(--destructive) / 0.9);
        }
        .btn-ghost {
            background-color: transparent;
            color: hsl(var(--foreground));
            padding: 0.25rem 0.5rem;
        }
        .btn-ghost:hover {
            background-color: hsl(var(--muted));
        }
        .input {
            display: flex;
            height: 2.5rem;
            width: 100%;
            border-radius: calc(var(--radius) - 2px);
            border: 1px solid hsl(var(--border));
            background-color: hsl(var(--background));
            padding: 0.5rem 0.75rem;
            font-size: 0.875rem;
            transition: var(--transition);
        }
        .input:focus {
            outline: none;
            border-color: hsl(var(--ring));
            box-shadow: 0 0 0 2px hsl(var(--ring) / 0.2);
        }
        .textarea {
            display: flex;
            min-height: 5rem;
            width: 100%;
            border-radius: calc(var(--radius) - 2px);
            border: 1px solid hsl(var(--border));
            background-color: hsl(var(--background));
            padding: 0.5rem 0.75rem;
            font-size: 0.875rem;
            transition: var(--transition);
            resize: vertical;
        }
        .textarea:focus {
            outline: none;
            border-color: hsl(var(--ring));
            box-shadow: 0 0 0 2px hsl(var(--ring) / 0.2);
        }
        .select {
            display: flex;
            height: 2.5rem;
            width: 100%;
            border-radius: calc(var(--radius) - 2px);
            border: 1px solid hsl(var(--border));
            background-color: hsl(var(--background));
            padding: 0.5rem 0.75rem;
            font-size: 0.875rem;
            transition: var(--transition);
        }
        .select:focus {
            outline: none;
            border-color: hsl(var(--ring));
            box-shadow: 0 0 0 2px hsl(var(--ring) / 0.2);
        }
        .label {
            font-size: 0.875rem;
            font-weight: 500;
            line-height: 1;
        }
        .text-muted-foreground {
            color: hsl(var(--muted-foreground));
        }
        .text-destructive {
            color: hsl(var(--destructive));
        }
        .bg-muted {
            background-color: hsl(var(--muted));
        }
        .border {
            border: 1px solid hsl(var(--border));
        }
        .hidden {
            display: none;
        }
        .flex {
            display: flex;
        }
        .grid {
            display: grid;
        }
        .items-center {
            align-items: center;
        }
        .justify-between {
            justify-content: space-between;
        }
        .gap-2 {
            gap: 0.5rem;
        }
        .gap-3 {
            gap: 0.75rem;
        }
        .gap-4 {
            gap: 1rem;
        }
        .gap-6 {
            gap: 1.5rem;
        }
        .p-4 {
            padding: 1rem;
        }
        .p-6 {
            padding: 1.5rem;
        }
        .px-4 {
            padding-left: 1rem;
            padding-right: 1rem;
        }
        .py-2 {
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
        }
        .mb-2 {
            margin-bottom: 0.5rem;
        }
        .mb-3 {
            margin-bottom: 0.75rem;
        }
        .mb-4 {
            margin-bottom: 1rem;
        }
        .mb-6 {
            margin-bottom: 1.5rem;
        }
        .mb-8 {
            margin-bottom: 2rem;
        }
        .rounded {
            border-radius: calc(var(--radius) - 2px);
        }
        .rounded-lg {
            border-radius: var(--radius);
        }
        .font-semibold {
            font-weight: 600;
        }
        .font-bold {
            font-weight: 700;
        }
        .text-sm {
            font-size: 0.875rem;
            line-height: 1.25rem;
        }
        .text-lg {
            font-size: 1.125rem;
            line-height: 1.75rem;
        }
        .text-xl {
            font-size: 1.25rem;
            line-height: 1.75rem;
        }
        .text-2xl {
            font-size: 1.5rem;
            line-height: 2rem;
        }
        .text-3xl {
            font-size: 1.875rem;
            line-height: 2.25rem;
        }
        .w-full {
            width: 100%;
        }
        .h-auto {
            height: auto;
        }
        .max-w-6xl {
            max-width: 72rem;
        }
        .mx-auto {
            margin-left: auto;
            margin-right: auto;
        }
        .container {
            width: 100%;
            margin-left: auto;
            margin-right: auto;
            padding-left: 1rem;
            padding-right: 1rem;
        }
        @media (min-width: 640px) {
            .container {
                max-width: 640px;
            }
            .grid-cols-2 {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
        }
        @media (min-width: 768px) {
            .container {
                max-width: 768px;
            }
            .md\\:grid-cols-3 {
                grid-template-columns: repeat(3, minmax(0, 1fr));
            }
        }
        @media (min-width: 1024px) {
            .container {
                max-width: 1024px;
            }
            .lg\\:grid-cols-4 {
                grid-template-columns: repeat(4, minmax(0, 1fr));
            }
        }
        @media (min-width: 1280px) {
            .container {
                max-width: 1280px;
            }
            .xl\\:grid-cols-5 {
                grid-template-columns: repeat(5, minmax(0, 1fr));
            }
        }
        .space-y-4 > * + * {
            margin-top: 1rem;
        }
        .max-h-80 {
            max-height: 20rem;
        }
        .max-h-96 {
            max-height: 24rem;
        }
        .overflow-auto {
            overflow: auto;
        }
        .fixed {
            position: fixed;
        }
        .inset-0 {
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
        }
        .z-50 {
            z-index: 50;
        }
        .bg-black {
            background-color: rgb(0 0 0);
        }
        .bg-opacity-50 {
            background-color: rgb(0 0 0 / 0.5);
        }
        .ml-1 {
            margin-left: 0.25rem;
        }
        .mt-1 {
            margin-top: 0.25rem;
        }
        .block {
            display: block;
        }
        .theme-toggle {
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 100;
        }
        .mx-auto {
            margin-left: auto;
            margin-right: auto;
        }
        .text-center {
            text-align: center;
        }
        .text-xs {
            font-size: 0.75rem;
            line-height: 1rem;
        }
        .leading-tight {
            line-height: 1.25;
        }
        .grid-cols-6 {
            grid-template-columns: repeat(6, minmax(0, 1fr));
        }
        @media (max-width: 768px) {
            .grid-cols-6 {
                grid-template-columns: repeat(3, minmax(0, 1fr));
            }
        }
        @media (max-width: 480px) {
            .grid-cols-6 {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        // Extension configurations
        const extensionConfigs = {
            a2a: {
                name: 'A2A Card',
                icon: 'üîó',
                iconClass: 'a2a-icon',
                description: 'Agent-to-Agent communication protocol card',
                schemaName: 'schema.oasf.agntcy.org/features/a2a',
                fields: [
                    { key: 'card_url', label: 'A2A Card URL', type: 'url', required: true, placeholder: 'https://example.com/a2a-card.json' },
                    { key: 'agent_id', label: 'Agent ID', type: 'text', required: true, placeholder: 'unique-agent-identifier' },
                    { key: 'version', label: 'Version', type: 'text', required: true, placeholder: '1.0.0' },
                    { key: 'capabilities', label: 'Capabilities', type: 'textarea', placeholder: 'List agent capabilities...' }
                ]
            },
            model: {
                name: 'LLM Model',
                icon: 'üß†',
                iconClass: 'model-icon',
                description: 'Large Language Model configuration',
                schemaName: 'schema.oasf.agntcy.org/features/model',
                fields: [
                    { key: 'provider', label: 'Provider', type: 'select', options: ['OpenAI', 'Anthropic', 'Google', 'Azure', 'AWS', 'Other'], required: true },
                    { key: 'model_name', label: 'Model Name', type: 'text', required: true, placeholder: 'gpt-4' },
                    { key: 'api_base', label: 'API Base URL', type: 'url', required: true, placeholder: 'https://api.openai.com/v1' },
                    { key: 'api_key', label: 'API Key', type: 'password', required: true, placeholder: 'sk-...' },
                    { key: 'max_tokens', label: 'Max Tokens', type: 'number', placeholder: '4096' },
                    { key: 'temperature', label: 'Temperature', type: 'number', step: '0.1', min: '0', max: '2', placeholder: '0.7' }
                ]
            },
            mcp: {
                name: 'MCP',
                icon: 'üîå',
                iconClass: 'mcp-icon',
                description: 'Model Context Protocol server configuration',
                schemaName: 'schema.oasf.agntcy.org/features/mcp',
                fields: [
                    { key: 'server_name', label: 'Server Name', type: 'text', required: true, placeholder: 'my-mcp-server' },
                    { key: 'server_type', label: 'Server Type', type: 'select', options: ['http', 'stdio', 'sse'], required: true },
                    { key: 'command', label: 'Command', type: 'text', placeholder: 'python server.py' },
                    { key: 'url', label: 'Server URL', type: 'url', placeholder: 'http://localhost:3000' },
                    { key: 'env_vars', label: 'Environment Variables', type: 'keyvalue', placeholder: 'KEY=value' }
                ]
            },
            prompt: {
                name: 'LLM Prompt',
                icon: 'üí¨',
                iconClass: 'prompt-icon',
                description: 'Predefined prompts for agent interactions',
                schemaName: 'schema.oasf.agntcy.org/features/prompt',
                fields: [
                    { key: 'prompt_name', label: 'Prompt Name', type: 'text', required: true, placeholder: 'system_prompt' },
                    { key: 'description', label: 'Description', type: 'text', required: true, placeholder: 'Main system prompt for the agent' },
                    { key: 'prompt_text', label: 'Prompt Text', type: 'textarea', required: true, placeholder: 'You are a helpful assistant...' },
                    { key: 'variables', label: 'Variables', type: 'keyvalue', placeholder: 'variable_name=default_value' }
                ]
            },
            observability: {
                name: 'Observability',
                icon: 'üìä',
                iconClass: 'observability-icon',
                description: 'Monitoring and observability configuration',
                schemaName: 'schema.oasf.agntcy.org/features/observability',
                fields: [
                    { key: 'protocols', label: 'Communication Protocols', type: 'multiselect', options: ['Otel_OTP_v1', 'HTTP_1.1', 'gRPC', 'SLIM'], required: true },
                    { key: 'export_format', label: 'Export Format', type: 'select', options: ['json', 'xml', 'csv'], required: true },
                    { key: 'data_platforms', label: 'Data Platform Integrations', type: 'tags', placeholder: 'prometheus, grafana, datadog' },
                    { key: 'schema_name', label: 'Data Schema Name', type: 'text', placeholder: 'agntcy-observability-v1' },
                    { key: 'schema_url', label: 'Data Schema URL', type: 'url', placeholder: 'https://schema.example.com/observability/v1' }
                ]
            },
            evaluation: {
                name: 'Evaluation',
                icon: 'üéØ',
                iconClass: 'evaluation-icon',
                description: 'Agent evaluation and testing framework',
                schemaName: 'schema.oasf.agntcy.org/features/evaluation',
                fields: [
                    { key: 'evaluation_type', label: 'Evaluation Type', type: 'select', options: ['performance', 'accuracy', 'safety', 'custom'], required: true },
                    { key: 'metrics', label: 'Metrics to Track', type: 'multiselect', options: ['response_time', 'accuracy_score', 'hallucination_rate', 'user_satisfaction'], required: true },
                    { key: 'test_dataset', label: 'Test Dataset URL', type: 'url', placeholder: 'https://example.com/test-data.json' },
                    { key: 'evaluation_frequency', label: 'Evaluation Frequency', type: 'select', options: ['on_demand', 'hourly', 'daily', 'weekly'], required: true },
                    { key: 'thresholds', label: 'Performance Thresholds', type: 'keyvalue', placeholder: 'accuracy=0.95' }
                ]
            }
        };
        // Theme Toggle Component
        function ThemeToggle() {
            const [isDark, setIsDark] = useState(() => {
                if (typeof window !== 'undefined') {
                    return localStorage.getItem('theme') === 'dark' ||
                           (!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches);
                }
                return false;
            });
            useEffect(() => {
                const root = document.documentElement;
                if (isDark) {
                    root.classList.add('dark');
                    localStorage.setItem('theme', 'dark');
                } else {
                    root.classList.remove('dark');
                    localStorage.setItem('theme', 'light');
                }
            }, [isDark]);
            return (
                <button
                    className="theme-toggle btn btn-ghost"
                    onClick={() => setIsDark(!isDark)}
                    style={{
                        width: '40px',
                        height: '40px',
                        borderRadius: '8px',
                        fontSize: '18px'
                    }}
                >
                    {isDark ? '‚òÄÔ∏è' : 'üåô'}
                </button>
            );
        }
        // Extension Gallery Component
        function ExtensionGallery({ extensions, onAddExtension }) {
            return (
                <div className="grid grid-cols-6 gap-2">
                    {extensions.map((extension) => (
                        <div
                            key={extension.id}
                            className="card extension-tile p-2 cursor-pointer hover:shadow-lg transition-all duration-200 text-center"
                            onClick={() => onAddExtension(extension.id)}
                            style={{ minHeight: '80px' }}
                        >
                            <div className={`extension-icon ${extension.iconClass} text-white mx-auto`}>
                                {extension.icon}
                            </div>
                            <h3 className="font-semibold text-xs leading-tight">{extension.name}</h3>
                        </div>
                    ))}
                </div>
            );
        }
        // Form Field Component
        function FormField({ field, value, onChange, error }) {
            const handleChange = (e) => {
                onChange(field.key, e.target.value);
            };
            const handleKeyValueChange = (e) => {
                const pairs = e.target.value.split('\n').filter(line => line.trim());
                const obj = {};
                pairs.forEach(pair => {
                    const [key, ...valueParts] = pair.split('=');
                    if (key && valueParts.length > 0) {
                        obj[key.trim()] = valueParts.join('=').trim();
                    }
                });
                onChange(field.key, obj);
            };
            const handleTagsChange = (e) => {
                const tags = e.target.value.split(',').map(tag => tag.trim()).filter(tag => tag);
                onChange(field.key, tags);
            };
            const handleMultiSelectChange = (e) => {
                const selectedOptions = Array.from(e.target.selectedOptions).map(option => option.value);
                onChange(field.key, selectedOptions);
            };
            const renderInput = () => {
                switch (field.type) {
                    case 'textarea':
                        return (
                            <textarea
                                className="textarea"
                                value={value || ''}
                                onChange={handleChange}
                                placeholder={field.placeholder}
                                required={field.required}
                            />
                        );
                    case 'select':
                        return (
                            <select
                                className="select"
                                value={value || ''}
                                onChange={handleChange}
                                required={field.required}
                            >
                                <option value="">Select an option</option>
                                {field.options?.map(option => (
                                    <option key={option} value={option}>{option}</option>
                                ))}
                            </select>
                        );
                    case 'multiselect':
                        return (
                            <select
                                className="select"
                                multiple
                                value={value || []}
                                onChange={handleMultiSelectChange}
                                required={field.required}
                                style={{ height: '120px' }}
                            >
                                {field.options?.map(option => (
                                    <option key={option} value={option}>{option}</option>
                                ))}
                            </select>
                        );
                    case 'keyvalue':
                        const kvValue = typeof value === 'object' && value !== null
                            ? Object.entries(value).map(([k, v]) => `${k}=${v}`).join('\n')
                            : '';
                        return (
                            <textarea
                                className="textarea"
                                value={kvValue}
                                onChange={handleKeyValueChange}
                                placeholder={field.placeholder}
                            />
                        );
                    case 'tags':
                        const tagsValue = Array.isArray(value) ? value.join(', ') : '';
                        return (
                            <input
                                className="input"
                                type="text"
                                value={tagsValue}
                                onChange={handleTagsChange}
                                placeholder={field.placeholder}
                            />
                        );
                    case 'number':
                        return (
                            <input
                                className="input"
                                type="number"
                                value={value || ''}
                                onChange={handleChange}
                                placeholder={field.placeholder}
                                min={field.min}
                                max={field.max}
                                step={field.step}
                                required={field.required}
                            />
                        );
                    case 'password':
                        return (
                            <input
                                className="input"
                                type="password"
                                value={value || ''}
                                onChange={handleChange}
                                placeholder={field.placeholder}
                                required={field.required}
                            />
                        );
                    case 'url':
                        return (
                            <input
                                className="input"
                                type="url"
                                value={value || ''}
                                onChange={handleChange}
                                placeholder={field.placeholder}
                                required={field.required}
                            />
                        );
                    default:
                        return (
                            <input
                                className="input"
                                type="text"
                                value={value || ''}
                                onChange={handleChange}
                                placeholder={field.placeholder}
                                required={field.required}
                            />
                        );
                }
            };
            return (
                <div className="mb-4">
                    <label className="label mb-2 block">
                        {field.label}
                        {field.required && <span className="text-destructive ml-1">*</span>}
                    </label>
                    {renderInput()}
                    {error && <p className="text-destructive text-sm mt-1">{error}</p>}
                </div>
            );
        }
        // Extension Form Component
        function ExtensionForm({ config, data, onChange }) {
            const [formData, setFormData] = useState(data || {});
            const [errors, setErrors] = useState({});
            const handleFieldChange = (fieldKey, value) => {
                const newData = { ...formData, [fieldKey]: value };
                setFormData(newData);
                onChange(newData);

                // Clear error when field is updated
                if (errors[fieldKey]) {
                    setErrors(prev => ({ ...prev, [fieldKey]: null }));
                }
            };
            const validateForm = () => {
                const newErrors = {};
                config.fields.forEach(field => {
                    if (field.required && (!formData[field.key] || formData[field.key] === '')) {
                        newErrors[field.key] = `${field.label} is required`;
                    }
                });
                setErrors(newErrors);
                return Object.keys(newErrors).length === 0;
            };
            useEffect(() => {
                setFormData(data || {});
            }, [data]);
            return (
                <div className="space-y-4">
                    {config.fields.map(field => (
                        <FormField
                            key={field.key}
                            field={field}
                            value={formData[field.key]}
                            onChange={handleFieldChange}
                            error={errors[field.key]}
                        />
                    ))}
                </div>
            );
        }
        // Extension Card Component
        function ExtensionCard({ extension, onUpdate, onRemove, onDuplicate, onToggle }) {
            const config = extensionConfigs[extension.extensionType];
            const isCollapsed = extension.collapsed === "true";
            if (!config) return null;
            return (
                <div className={`card extension-card ${isCollapsed ? 'collapsed' : 'expanded'}`}>
                    <div className="p-6">
                        {/* Header */}
                        <div className="flex items-center justify-between mb-4">
                            <div className="flex items-center gap-3">
                                <div className={`extension-icon ${config.iconClass} text-white`} style={{ width: '32px', height: '32px', fontSize: '18px' }}>
                                    {config.icon}
                                </div>
                                <div>
                                    <h3 className="font-semibold text-lg">{extension.name}</h3>
                                    <p className="text-sm text-muted-foreground">
                                        Instance #{extension.id.split('_')[1] || '1'}
                                    </p>
                                </div>
                            </div>
                            <div className="flex items-center gap-2">
                                <button
                                    className="btn btn-ghost"
                                    onClick={() => onToggle(extension.id)}
                                >
                                    {isCollapsed ? '‚ñº' : '‚ñ≤'}
                                </button>
                                <button
                                    className="btn btn-ghost"
                                    onClick={() => onDuplicate(extension.id)}
                                >
                                    üìã
                                </button>
                                <button
                                    className="btn btn-ghost"
                                    onClick={() => onRemove(extension.id)}
                                >
                                    üóëÔ∏è
                                </button>
                            </div>
                        </div>

                        {/* Form */}
                        {!isCollapsed && (
                            <ExtensionForm
                                config={config}
                                data={extension.data}
                                onChange={(data) => onUpdate(extension.id, data)}
                            />
                        )}
                    </div>
                </div>
            );
        }
        // JSON Preview Component
        function JsonPreview({ extensions, isVisible, onClose }) {
            const generateOASFRecord = () => {
                const features = extensions.map(ext => {
                    const config = extensionConfigs[ext.extensionType];
                    if (!config) return null;
                    return {
                        schema: config.schemaName,
                        data: ext.data
                    };
                }).filter(Boolean);
                return {
                    name: "Generated Agent",
                    description: "Agent generated using OASF Card Generator",
                    version: "1.0.0",
                    authors: ["OASF Generator"],
                    features,
                    metadata: {
                        generator: "OASF Card Generator",
                        generated_at: new Date().toISOString()
                    }
                };
            };
            const downloadJson = () => {
                const record = generateOASFRecord();
                const blob = new Blob([JSON.stringify(record, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'oasf-record.json';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            };
            if (!isVisible) return null;
            return (
                <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                    <div className="card max-w-4xl w-full h-auto max-h-96 overflow-hidden">
                        <div className="p-6">
                            <div className="flex items-center justify-between mb-4">
                                <h2 className="text-xl font-bold">OASF Record Preview</h2>
                                <div className="flex items-center gap-2">
                                    <button className="btn btn-primary" onClick={downloadJson}>
                                        üì• Download JSON
                                    </button>
                                    <button className="btn btn-ghost" onClick={onClose}>
                                        ‚úï
                                    </button>
                                </div>
                            </div>
                            <div className="overflow-auto max-h-80">
                                <pre className="text-sm bg-muted p-4 rounded overflow-auto">
                                    {JSON.stringify(generateOASFRecord(), null, 2)}
                                </pre>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }
        // Main App Component
        function App() {
            const [activeExtensions, setActiveExtensions] = useState([]);
            const [showPreview, setShowPreview] = useState(false);
            const [nextId, setNextId] = useState(1);
            // Available extensions from config
            const availableExtensions = Object.entries(extensionConfigs).map(([id, config]) => ({
                id,
                ...config,
                category: id === 'observability' || id === 'evaluation' ? 'monitoring' : 'runtime'
            }));
            const addExtension = (extensionType) => {
                const config = extensionConfigs[extensionType];
                if (!config) return;
                const newExtension = {
                    id: `${extensionType}_${nextId}`,
                    extensionType,
                    name: config.name,
                    data: {},
                    collapsed: "false",
                    order: activeExtensions.length
                };
                setActiveExtensions(prev => [...prev, newExtension]);
                setNextId(prev => prev + 1);
            };
            const updateExtension = (instanceId, data) => {
                setActiveExtensions(prev =>
                    prev.map(ext => ext.id === instanceId ? { ...ext, data } : ext)
                );
            };
            const removeExtension = (instanceId) => {
                setActiveExtensions(prev => prev.filter(ext => ext.id !== instanceId));
            };
            const duplicateExtension = (instanceId) => {
                const extension = activeExtensions.find(ext => ext.id === instanceId);
                if (!extension) return;
                const newExtension = {
                    ...extension,
                    id: `${extension.extensionType}_${nextId}`,
                    order: activeExtensions.length
                };
                setActiveExtensions(prev => [...prev, newExtension]);
                setNextId(prev => prev + 1);
            };
            const toggleExtension = (instanceId) => {
                setActiveExtensions(prev =>
                    prev.map(ext =>
                        ext.id === instanceId
                            ? { ...ext, collapsed: ext.collapsed === "true" ? "false" : "true" }
                            : ext
                    )
                );
            };
            const importJson = () => {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = '.json';
                input.onchange = (e) => {
                    const file = e.target.files[0];
                    if (!file) return;
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        try {
                            const data = JSON.parse(e.target.result);
                            if (data.features && Array.isArray(data.features)) {
                                const newExtensions = data.features.map((feature, index) => {
                                    const schemaName = feature.schema;
                                    const extensionType = Object.keys(extensionConfigs).find(key =>
                                        extensionConfigs[key].schemaName === schemaName
                                    );

                                    if (extensionType) {
                                        return {
                                            id: `${extensionType}_${nextId + index}`,
                                            extensionType,
                                            name: extensionConfigs[extensionType].name,
                                            data: feature.data || {},
                                            collapsed: "false",
                                            order: index
                                        };
                                    }
                                    return null;
                                }).filter(Boolean);
                                setActiveExtensions(newExtensions);
                                setNextId(prev => prev + newExtensions.length);
                            }
                        } catch (error) {
                            alert('Invalid JSON file');
                        }
                    };
                    reader.readAsText(file);
                };
                input.click();
            };
            return (
                <div className="container mx-auto py-8">
                    {/* Theme Toggle */}
                    <ThemeToggle />

                    {/* Header */}
                    <div className="text-center mb-8">
                        <div className="flex items-center justify-center gap-3 mb-4">
                            <div className="w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center text-white text-2xl font-bold">
                                üì¶
                            </div>
                            <h1 className="text-3xl font-bold">OASF Card Generator</h1>
                        </div>
                        <p className="text-muted-foreground text-lg max-w-2xl mx-auto">
                            Build comprehensive OASF records by adding and configuring extensions
                        </p>
                    </div>
                    {/* Extension Gallery */}
                    <div className="mb-6">
                        <h3 className="text-lg font-semibold mb-4">Available Extensions</h3>
                        <ExtensionGallery
                            extensions={availableExtensions}
                            onAddExtension={addExtension}
                        />
                    </div>
                    {/* Active Extensions */}
                    <div className="mb-8">
                        <div className="flex items-center justify-between mb-6">
                            <h2 className="text-2xl font-semibold">Active Extensions</h2>
                            <div className="flex items-center gap-3">
                                <button className="btn btn-secondary" onClick={importJson}>
                                    üìÅ Import JSON
                                </button>
                                <button
                                    className="btn btn-primary"
                                    onClick={() => setShowPreview(true)}
                                    disabled={activeExtensions.length === 0}
                                >
                                    üëÅÔ∏è Preview JSON
                                </button>
                            </div>
                        </div>
                        {activeExtensions.length === 0 ? (
                            <div className="card p-8 text-center">
                                <div className="text-6xl mb-4">üì¶</div>
                                <h3 className="text-xl font-semibold mb-2">No Extensions Added</h3>
                                <p className="text-muted-foreground">
                                    Click on an extension above to add it to your OASF record
                                </p>
                            </div>
                        ) : (
                            <div className="space-y-4">
                                {activeExtensions.map((extension) => (
                                    <ExtensionCard
                                        key={extension.id}
                                        extension={extension}
                                        onUpdate={updateExtension}
                                        onRemove={removeExtension}
                                        onDuplicate={duplicateExtension}
                                        onToggle={toggleExtension}
                                    />
                                ))}
                            </div>
                        )}
                    </div>
                    {/* JSON Preview Modal */}
                    <JsonPreview
                        extensions={activeExtensions}
                        isVisible={showPreview}
                        onClose={() => setShowPreview(false)}
                    />
                </div>
            );
        }
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>