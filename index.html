<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AGNTCY OASF Agent Card Generator</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🔮</text></svg>">
  <style>
    :root {
      /* Material Design Light Theme */
      --bg: #f8fafc;
      --fg: #1e293b;
      --container-bg: #ffffff;
      --primary: #187ADC;
      --primary-hover: #146BB8;
      --primary-light: #E8F4FD;
      --accent: #10b981;
      --accent-hover: #059669;
      --accent-light: #d1fae5;
      --danger: #ef4444;
      --danger-hover: #dc2626;
      --danger-light: #fee2e2;
      --warning: #f59e0b;
      --warning-light: #fef3c7;
      --border-color: #e2e8f0;
      --border-hover: #cbd5e1;
      --input-bg: #ffffff;
      --input-fg: #1e293b;
      --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
      --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
      --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
      --radius: 8px;
      --radius-lg: 12px;
      --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }

    [data-theme="dark"] {
      /* Material Design Dark Theme */
      --bg: #0f172a;
      --fg: #f1f5f9;
      --container-bg: #1e293b;
      --primary: #187ADC;
      --primary-hover: #146BB8;
      --primary-light: #0f2951;
      --accent: #10b981;
      --accent-hover: #059669;
      --accent-light: #064e3b;
      --danger: #ef4444;
      --danger-hover: #dc2626;
      --danger-light: #7f1d1d;
      --warning: #f59e0b;
      --warning-light: #78350f;
      --border-color: #334155;
      --border-hover: #475569;
      --input-bg: #334155;
      --input-fg: #f1f5f9;
      --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.3);
      --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.3), 0 1px 2px -1px rgb(0 0 0 / 0.3);
      --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.3), 0 4px 6px -4px rgb(0 0 0 / 0.3);
    }

    body {
      font-family: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg);
      color: var(--fg);
      margin: 0;
      padding: 24px;
      transition: var(--transition);
      line-height: 1.6;
      min-height: 100vh;
    }

    .loading {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      font-weight: 500;
    }

    .loading-spinner {
      border: 4px solid rgba(0, 0, 0, 0.1);
      border-left: 4px solid var(--primary);
      border-radius: 50%;
      width: 20px;
      height: 20px;
      animation: spin 1s linear infinite;
      margin-right: 10px;
    }

    :root {
      --primary-hover: #0056b3;
    }

    .url-table {
      width: 100%;
      margin-bottom: 20px;
      border-collapse: separate;
      border-spacing: 10px 0;
    }

    .url-table td {
      padding: 0;
      vertical-align: middle;
    }

    .url-table td:first-child {
      width: 100%;
    }

    .url-table td:last-child {
      width: 140px;
    }

    .url-input {
      width: 100%;
      padding: 16px;
      border: 2px solid var(--border-color);
      border-radius: var(--radius);
      font-size: 0.875rem;
      min-height: 120px;
      max-height: 400px;
      box-sizing: border-box;
      resize: vertical;
      overflow-y: auto;
      font-family: 'JetBrains Mono', 'Fira Code', Consolas, monospace;
      line-height: 1.6;
      transition: var(--transition);
      white-space: pre;
      background-color: var(--input-bg);
      color: var(--input-fg);
    }

    .url-input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px var(--primary-light);
    }

    .url-input:hover {
      border-color: var(--border-hover);
    }

    .example-link {
      margin-bottom: 12px;
      font-size: 0.875rem;
      padding: 12px;
      background: var(--primary-light);
      border-radius: var(--radius);
      border: 1px solid var(--border-color);
    }

    .example-link a {
      word-break: break-all;
      color: var(--primary);
      text-decoration: none;
      font-weight: 500;
    }

    .example-link a:hover {
      text-decoration: underline;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --input-bg: #2a2a2a;
        --input-fg: #e0e0e0;
        --border-color: #555;
      }
    }

    .url-button {
      padding: 12px 20px;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: var(--radius);
      cursor: pointer;
      font-weight: 600;
      transition: var(--transition);
      height: 48px;
      min-width: 160px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.875rem;
      box-shadow: var(--shadow-sm);
    }

    .url-button:hover {
      background: var(--primary-hover);
      transform: translateY(-1px);
      box-shadow: var(--shadow);
    }

    .url-button:disabled {
      background: var(--border-color);
      color: var(--fg);
      cursor: not-allowed;
      opacity: 0.6;
      transform: none;
      box-shadow: none;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --disabled-bg: #555555;
        --disabled-fg: #aaaaaa;
      }
    }

    .url-button-content {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100%;
    }

    .dynamic-list-container {
      width: 100%;
    }

    .dynamic-list-item {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 16px;
      margin-bottom: 8px;
      align-items: center;
    }

    .server-env-item {
      display: grid;
      grid-template-columns: 1fr 1fr auto;
      gap: 16px;
      margin-bottom: 8px;
      align-items: center;
    }

    .server-list-container {
      width: 100%;
    }

    .server-container {
      border: 2px solid var(--border-color);
      border-radius: var(--radius-lg);
      padding: 24px;
      margin-bottom: 20px;
      background: var(--container-bg);
      transition: var(--transition);
      box-shadow: var(--shadow-sm);
    }

    .server-container:hover {
      border-color: var(--border-hover);
      box-shadow: var(--shadow);
    }

    .server-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .server-header h3 {
      margin: 0;
      color: var(--fg);
      font-size: 1.125rem;
      font-weight: 700;
    }

    .server-fields {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .server-field {
      width: 100%;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .error-message {
      background: var(--danger-light);
      color: var(--danger);
      padding: 16px;
      border-radius: var(--radius);
      margin-bottom: 20px;
      border-left: 4px solid var(--danger);
      font-weight: 500;
      box-shadow: var(--shadow-sm);
    }

    .container {
      max-width: 900px;
      margin: auto;
      background: var(--container-bg);
      padding: 40px;
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-lg);
      position: relative;
      border: 1px solid var(--border-color);
    }

    .toast {
      position: fixed;
      bottom: 24px;
      right: 24px;
      background: var(--accent);
      color: white;
      padding: 16px 20px;
      border-radius: var(--radius);
      opacity: 0;
      transform: translateY(20px);
      transition: var(--transition);
      font-weight: 500;
      box-shadow: var(--shadow-lg);
      z-index: 1000;
    }

    .toast.show {
      opacity: 1;
      transform: translateY(0);
    }

    h1 {
      text-align: center;
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      background: linear-gradient(90deg, #187ADC 0%, #09C0E9 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    label {
      font-weight: 600;
      display: block;
      margin-top: 20px;
      margin-bottom: 8px;
      color: var(--fg);
      font-size: 0.875rem;
    }

    input, select {
      width: 100%;
      padding: 12px 16px;
      margin-top: 4px;
      border: 2px solid var(--border-color);
      border-radius: var(--radius);
      background: var(--input-bg);
      color: var(--input-fg);
      font-size: 0.875rem;
      transition: var(--transition);
      box-sizing: border-box;
    }

    input:focus, select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px var(--primary-light);
    }

    input:hover, select:hover {
      border-color: var(--border-hover);
    }

    .annotation-tag {
      display: inline-flex;
      align-items: center;
      background: var(--primary);
      color: white;
      padding: 6px 12px;
      border-radius: var(--radius);
      margin: 4px;
      font-size: 0.75rem;
      font-weight: 500;
      max-width: fit-content;
      box-shadow: var(--shadow-sm);
      transition: var(--transition);
    }

    .annotation-tag:hover {
      transform: translateY(-1px);
      box-shadow: var(--shadow);
    }

    .annotation-tag button {
      background: none;
      border: none;
      color: rgba(255, 255, 255, 0.8);
      margin-left: 8px;
      padding: 2px;
      cursor: pointer;
      font-size: 0.75rem;
      border-radius: 2px;
      transition: var(--transition);
    }

    .annotation-tag button:hover {
      color: white;
      background: rgba(255, 255, 255, 0.2);
    }

    button {
      margin-top: 24px;
      padding: 12px 24px;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: var(--radius);
      cursor: pointer;
      font-size: 0.875rem;
      font-weight: 600;
      transition: var(--transition);
      box-shadow: var(--shadow-sm);
    }

    button:hover {
      background: var(--primary-hover);
      transform: translateY(-1px);
      box-shadow: var(--shadow);
    }

    button:active {
      transform: translateY(0);
    }

    pre {
      background: #1e1e1e;
      color: #f8f8f2;
      padding: 10px;
      border-radius: 6px;
      overflow-x: auto;
      font-size: 13px;
      white-space: pre-wrap;
    }

    .copy-btn {
      background: var(--primary);
      margin-left: 12px;
    }

    .copy-btn:hover {
      background: var(--primary-hover);
    }

    .toggle-btn {
      position: absolute;
      top: 16px;
      right: 16px;
      cursor: pointer;
      background: var(--border-color);
      border: 2px solid var(--border-color);
      border-radius: var(--radius);
      font-size: 1.25rem;
      padding: 8px;
      transition: var(--transition);
      color: var(--fg);
    }

    .toggle-btn:hover {
      background: var(--border-hover);
      border-color: var(--border-hover);
      transform: scale(1.05);
    }

    .string {
      color: #c3e88d;
    }

    .number {
      color: #82aaff;
    }

    .boolean {
      color: #ffcb6b;
    }

    .null {
      color: #f78c6c;
    }

    .key {
      color: #c792ea;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      body {
        padding: 16px;
      }
      
      .container {
        padding: 24px;
        margin: 0;
        border-radius: var(--radius);
      }
      
      h1 {
        font-size: 1.5rem;
      }
      
      .url-table {
        border-spacing: 8px 0;
      }
      
      .url-table td:last-child {
        width: 120px;
      }
      
      .url-button {
        min-width: 120px;
        font-size: 0.8rem;
      }
      
      .server-container {
        padding: 16px;
      }
      
      .dynamic-list-item {
        grid-template-columns: 1fr;
        gap: 8px;
      }
      
      .server-env-item {
        grid-template-columns: 1fr;
        gap: 8px;
      }
    }

    @media (max-width: 480px) {
      .container {
        padding: 16px;
      }
      
      .url-table {
        display: block;
      }
      
      .url-table td {
        display: block;
        width: 100% !important;
        padding: 4px 0;
      }
      
      .url-button {
        width: 100%;
        margin-top: 8px;
      }
    }

    /* Loading animations */
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .loading {
      animation: pulse 2s infinite;
    }

    /* Focus improvements for accessibility */
    *:focus-visible {
      outline: 2px solid var(--primary);
      outline-offset: 2px;
    }

    /* Button variants */
    .btn-danger {
      background: var(--danger) !important;
      color: white !important;
    }

    .btn-danger:hover {
      background: var(--danger-hover) !important;
    }

    .btn-primary {
      background: var(--primary) !important;
      color: white !important;
    }

    .btn-primary:hover {
      background: var(--primary-hover) !important;
    }

    .btn-small {
      padding: 6px 12px !important;
      font-size: 0.75rem !important;
      margin-top: 8px !important;
    }

    .btn-full {
      width: 100% !important;
    }
  </style>
</head>
<body>
  <button id="themeToggle" class="toggle-btn">🌙</button>
  <div id="root"></div>
  <div id="toast" class="toast">JSON copied to clipboard!</div>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script>
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    document.body.dataset.theme = prefersDark ? 'dark' : 'light';

    const btn = document.getElementById('themeToggle');
    btn.textContent = document.body.dataset.theme === 'dark' ? '☀️' : '🌙';
    btn.onclick = () => {
      document.body.dataset.theme = document.body.dataset.theme === 'dark' ? 'light' : 'dark';
      btn.textContent = document.body.dataset.theme === 'dark' ? '☀️' : '🌙';
    };

    function showToast() {
      const t = document.getElementById('toast');
      t.classList.add('show');
      setTimeout(() => t.classList.remove('show'), 2000);
    }

    function syntaxHighlight(json) {
      if (!json) return '';
      json = json.replace(/(&|<|>)/g, c => ({ '&': '&amp;', '<': '&lt;', '>': '&gt;' }[c]));
      return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(?=:)|\b(true|false)\b|null|"(.*?)"|\b([0-9]+)\b)/g, match => {
        if (/^".*"$/.test(match)) return '<span class="string">' + match + '</span>';
        if (/true|false/.test(match)) return '<span class="boolean">' + match + '</span>';
        if (/null/.test(match)) return '<span class="null">' + match + '</span>';
        return '<span class="number">' + match + '</span>';
      });
    }

    // Function to fetch the latest OASF version
    async function fetchLatestVersion() {
      try {
        const response = await fetch('https://schema.oasf.outshift.com/api/version');
        if (!response.ok) {
          throw new Error('Failed to fetch latest version');
        }
        const data = await response.json();
        return data.version;
      } catch (error) {
        console.error('Error fetching latest version:', error);
        return 'v0.5.0'; // Default fallback version
      }
    }

    // Function to fetch the latest record JSON
    async function fetchRecordJson(version) {
      try {
        const response = await fetch(`https://schema.oasf.outshift.com/sample/${version}/objects/record?profiles=`);
        if (!response.ok) {
          throw new Error(`HTTP error! Status: ${response.status}`);
        }
        const data = await response.json();
        return data;
      } catch (error) {
        console.error('Error fetching record JSON:', error);
        return null;
      }
    }

    // Fetch latest OASF version
    async function fetchLatestVersion() {
      try {
        const response = await fetch('https://schema.oasf.outshift.com/api/version');
        if (!response.ok) {
          throw new Error('Failed to fetch latest version');
        }
        const data = await response.json();
        return data.version;
      } catch (error) {
        console.error('Error fetching latest version:', error);
        return 'v0.5.0'; // Default fallback version
      }
    }

    // Function to fetch the latest record JSON
    async function fetchRecordJson(version) {
      try {
        const response = await fetch(`https://schema.oasf.outshift.com/sample/${version}/objects/record?profiles=`);
        if (!response.ok) {
          throw new Error(`HTTP error! Status: ${response.status}`);
        }
        return await response.json();
      } catch (error) {
        console.error('Error fetching record JSON:', error);
        return null;
      }
    }

    // Base schemas for different card types
    const schemas = {
      A2A: [
        { key: 'agentDirOrgRepo', label: 'Agent Directory Org Repo Name', type: 'text', required: true, placeholder: 'e.g. cnoe-io/ai-platform-engineer' },
        { key: 'name', label: 'A2A Agent Name', type: 'text', required: true },
        { key: 'description', label: 'Description', type: 'text', required: true },
        { key: 'version', label: 'Version', type: 'text', required: true },
        { key: 'authors', label: 'Authors', type: 'dynamic-list', required: true, placeholder: 'Enter author and press Enter for new author' },
        // A2A specific fields
        { key: 'capabilities_pushNotifications', label: 'Push Notifications', type: 'checkbox', required: false, extensionField: true, extensionType: 'a2a' },
        { key: 'capabilities_streaming', label: 'Streaming', type: 'checkbox', required: false, extensionField: true, extensionType: 'a2a' },
        { key: 'defaultInputModes', label: 'Default Input Modes', type: 'dynamic-list', required: false, extensionField: true, extensionType: 'a2a' },
        { key: 'defaultOutputModes', label: 'Default Output Modes', type: 'dynamic-list', required: false, extensionField: true, extensionType: 'a2a' },
        { key: 'protocolVersion', label: 'Protocol Version', type: 'text', required: false, extensionField: true, extensionType: 'a2a' },
        { key: 'url', label: 'URL', type: 'text', required: false, extensionField: true, extensionType: 'a2a' },

        { key: 'extension-skills-header', label: '', type: 'h4-header', content: 'A2A Skills', required: false, extensionField: true, extensionType: 'a2a' },
        { key: 'extension-skills', label: '', type: 'extension-skills-list', required: false, extensionField: true, extensionType: 'a2a' },
        { key: 'oasf-skills-header', label: '', type: 'h4-header', content: 'OASF Skill List', required: false },
        { key: 'oasf-skills', label: '', type: 'oasf-skills-list', required: false },
        { key: 'locators-header', label: '', type: 'h4-header', content: 'OASF Locators', required: false },
        { key: 'locators', label: '', type: 'locators-list', required: false }
      ],
      MCP: [
        { key: 'name', label: 'Name', type: 'text', required: true },
        { key: 'description', label: 'Description', type: 'text', required: true },
        { key: 'version', label: 'Version', type: 'text', required: true },
        { key: 'authors', label: 'Authors', type: 'dynamic-list', required: true, placeholder: 'Enter author and press Enter for new author' },
        // MCP specific fields
        { key: 'servers', label: 'Servers', type: 'server-list', required: false, extensionField: true, extensionType: 'mcp' }
      ],
      Model: [
        { key: 'name', label: 'Name', type: 'text', required: true },
        { key: 'description', label: 'Description', type: 'text', required: true },
        { key: 'version', label: 'Version', type: 'text', required: false },
        { key: 'annotations', label: 'Annotations', type: 'annotations', required: false }
      ],
      Prompt: [
        { key: 'name', label: 'Name', type: 'text', required: true },
        { key: 'description', label: 'Description', type: 'text', required: true },
        { key: 'version', label: 'Version', type: 'text', required: false },
        { key: 'annotations', label: 'Annotations', type: 'annotations', required: false }
      ]
    };

    function App() {
      const [cardType, setCardType] = React.useState('A2A');
      const [form, setForm] = React.useState({ annotations: [] });
      const [formModified, setFormModified] = React.useState(false);
      const [latestVersion, setLatestVersion] = React.useState('');
      const [recordJson, setRecordJson] = React.useState(null);
      const [loading, setLoading] = React.useState(true);
      const [error, setError] = React.useState(null);
      const [cardUrl, setCardUrl] = React.useState('');
      const [loadingCard, setLoadingCard] = React.useState(false);

      // State for dynamic lists
      const [skillExamplesList, setSkillExamplesList] = React.useState(['']);
      const [skillTagsList, setSkillTagsList] = React.useState(['']);
      const [inputModesList, setInputModesList] = React.useState(['text']);
      const [outputModesList, setOutputModesList] = React.useState(['text']);
      const [authorsList, setAuthorsList] = React.useState(['']);
      const [serverEnvList, setServerEnvList] = React.useState([{ key: '', value: '' }]);
      const [serversList, setServersList] = React.useState([
        { id: 1, name: '', type: '', url: '', envVars: [{ key: '', value: '' }] }
      ]);

      // State for extension skills list
      const [extensionSkillsList, setExtensionSkillsList] = React.useState([
        { id: '', name: '', description: '', examples: [''], tags: [''] }
      ]);

      // State for OASF skills list
      const [oasfSkillsList, setOasfSkillsList] = React.useState([
        { class_uid: 10101, category_uid: 1, category_name: 'Natural Language Processing', class_name: 'Contextual Comprehension' }
      ]);

      // State for OASF locators list
      const [locatorsList, setLocatorsList] = React.useState([
        { type: 'source_code', url: 'https://github.com/' }
      ]);



      // Function to handle adding a new item to a dynamic list
      const handleAddListItem = (listSetter, currentList) => {
        listSetter([...currentList, '']);
      };

      // Function to handle updating an item in a dynamic list
      const handleListItemChange = (listSetter, currentList, index, value) => {
        const newList = [...currentList];
        newList[index] = value;
        listSetter(newList);
      };

      // Function to handle removing an item from a dynamic list
      const handleRemoveListItem = (listSetter, currentList, index) => {
        if (currentList.length <= 1) return; // Always keep at least one input
        const newList = currentList.filter((_, i) => i !== index);
        listSetter(newList);
      };

      // Function to handle key press in dynamic list inputs
      const handleListKeyPress = (e, listSetter, currentList, index, listType) => {
        if (e.key === 'Enter' && !e.shiftKey) {
          e.preventDefault();
          handleAddListItem(listSetter, currentList);
          // Focus the new input after a short delay to allow React to render
          setTimeout(() => {
            // Use a more specific selector to target only inputs within the same list type
            const selector = `[data-list-type="${listType}"][data-list-index="${index + 1}"]`;
            const inputs = document.querySelectorAll(selector);
            if (inputs.length > 0) {
              inputs[0].focus();
            }
          }, 10);
        }
      };

      // Fetch A2A card data from URL
      const fetchCardFromUrl = async (url) => {
        try {
          setLoadingCard(true);
          setError(null);

          // First, check if the URL is HTTP or HTTPS
          const isHttp = url.startsWith('http://');
          let fetchUrl = url;

          // Create a proxy URL to avoid CORS issues
          // For demo purposes, we'll use a fallback if the fetch fails
          try {
            // First try with the original URL
            let response = await fetch(fetchUrl, {
              headers: {
                'Accept': 'application/json'
              },
              mode: 'cors'
            });

            // If the original URL fails and it's HTTP, try with HTTPS
            if (!response.ok && isHttp) {
              console.log('HTTP URL failed, trying with HTTPS...');
              fetchUrl = url.replace('http://', 'https://');
              response = await fetch(fetchUrl, {
                headers: {
                  'Accept': 'application/json'
                },
                mode: 'cors'
              });
            }

            if (response.ok) {
              const data = await response.json();
              return data;
            } else {
              console.warn(`Failed to fetch from ${fetchUrl}: ${response.status} ${response.statusText}`);
            }
          } catch (corsError) {
            console.warn(`CORS/network error with ${fetchUrl}:`, corsError);
            // If we tried HTTPS already, show a more helpful error message
            if (fetchUrl.startsWith('https://')) {
              setError(`Could not load data from ${url}. If this is a local development server, make sure it is running on https or copy the JSON data here.`);
            } else if (isHttp) {
              setError(`Could not load data from ${url}. If this is a local development server, make sure it is running on https or copy the JSON data here.`);
            } else {
              setError(`Could not load data from ${url}. Please check the URL and try again.`);
            }
            // Continue to fallback
          }

          // If we reach here, either the fetch failed or CORS blocked it
          // For demo purposes, return example data based on the URL
          if (url.includes('locahost') || url.includes('agent.json')) {
            return {
              "name": "Sample A2A Card",
              "version": "0.1.0",
              "description": "Sample A2A card description",
              "signature": {
                "signature": "ol",
                "signed_at": new Date().toISOString(),
                "content_type": "application/json",
                "certificate": "self-signed",
                "algorithm": "none",
                "content_bundle": "lm"
              },
              "extensions": [
                {
                  "data": {
                    "capabilities": {
                      "pushNotifications": true,
                      "streaming": true
                    },
                    "defaultInputModes": [
                      "text",
                      "text/plain"
                    ],
                    "defaultOutputModes": [
                      "text",
                      "text/plain"
                    ],
                    "description": "Sample A2A card description",
                    "name": "Sample A2A Card",
                    "protocolVersion": "0.2.6",
                    "url": "http://localhost:8000/",
                    "version": "0.1.0",
                    "skills": [
                      {
                        "description": "An AI Platform Engineer is a multi-agent system designed to manage operations across various tools.",
                        "examples": [
                          "Create a new ArgoCD application named 'my-app'.",
                          "Get the status of the 'frontend' ArgoCD application.",
                          "Update the image version for 'backend' app."
                        ],
                        "id": "ai_platform_engineer",
                        "name": "AI Platform Engineer",
                        "tags": [
                          "github",
                          "devops"
                        ]
                      }
                    ]
                  },
                  "name": "schema.oasf.agntcy.org/features/a2a"
                }
              ],
              "schema_version": "v0.5.0",
              "authors": ["Sample Author"],
              "created_at": new Date().toISOString(),
              "locators": [
                {
                  "type": "source_code",
                  "url": "https://github.com/"
                }
              ]
            };
          } else {
            throw new Error(`Could not fetch A2A card from ${url}. CORS may be blocking the request.`);
          }
        } catch (error) {
          console.error('Error fetching A2A card:', error);
          setError(`Error fetching A2A card: ${error.message}`);
          return null;
        } finally {
          setLoadingCard(false);
        }
      };

      // Load A2A card data into form
      const loadCardData = async () => {
        if (!cardUrl.trim()) {
          setError('Please enter a valid URL or JSON data');
          return;
        }

        let cardData;
        const input = cardUrl.trim();


        // Check if input is JSON data
        if (input.startsWith('{') && input.endsWith('}')) {
          try {
            setLoadingCard(true);
            setError(null);
            cardData = JSON.parse(input);

          } catch (error) {
            console.error('Error parsing JSON:', error);
            setError(`Invalid JSON data: ${error.message}`);
            setLoadingCard(false);
            return;
          }
        } else {
          // Input is a URL
          cardData = await fetchCardFromUrl(input);
        }

        if (cardData) {
          // Set card type to A2A
          setCardType('A2A');

          // Update form with card data
          const newForm = { ...form };

          // Auto-extract Agent Directory Org Repo Name from URL if it's a GitHub URL
          if (input.includes('github.com') || input.includes('githubusercontent.com')) {
            // Extract just the repo name from GitHub URLs
            // Patterns: 
            // https://github.com/owner/repo/... -> repo
            // https://raw.githubusercontent.com/owner/repo/... -> repo
            const githubMatch = input.match(/github(?:usercontent)?\.com\/([^\/]+)\/([^\/]+)/);
            if (githubMatch) {
              const owner = githubMatch[1];
              const repo = githubMatch[2];
              
              // Set repo name for agentDirOrgRepo
              newForm.agentDirOrgRepo = repo;
              
              // Set owner as author if no authors exist in the card data
              if (!cardData.authors || cardData.authors.length === 0) {
                setAuthorsList([owner]);
              }
            }
          } else {
            // If not from GitHub, leave empty for user to input manually
            newForm.agentDirOrgRepo = "";
          }

          // Basic fields
          newForm.name = cardData.name || '';
          newForm.description = cardData.description || '';
          newForm.version = cardData.version || '';
          newForm.url = cardData.url || '';
          newForm.protocolVersion = cardData.protocolVersion || '';

          // Input/Output modes
          if (cardData.defaultInputModes && Array.isArray(cardData.defaultInputModes)) {
            newForm.defaultInputModes = cardData.defaultInputModes.join(', ');
            // Update the dynamic list state
            if (cardData.defaultInputModes.length > 0) {
              setInputModesList(cardData.defaultInputModes);
            } else {
              setInputModesList(['text']);
            }
          } else {
            setInputModesList(['text']);
          }

          if (cardData.defaultOutputModes && Array.isArray(cardData.defaultOutputModes)) {
            newForm.defaultOutputModes = cardData.defaultOutputModes.join(', ');
            // Update the dynamic list state
            if (cardData.defaultOutputModes.length > 0) {
              setOutputModesList(cardData.defaultOutputModes);
            } else {
              setOutputModesList(['text']);
            }
          } else {
            setOutputModesList(['text']);
          }

          // Capabilities
          if (cardData.capabilities) {
            newForm.capabilities_pushNotifications = cardData.capabilities.pushNotifications || false;
            newForm.capabilities_streaming = cardData.capabilities.streaming || false;
          }

          // Check for skills in the loaded card data

          // First, check if skills are directly at the top level (original A2A format)
          if (cardData.skills && Array.isArray(cardData.skills)) {
            const topLevelSkills = cardData.skills.map(skill => ({
              id: skill.id || '',
              name: skill.name || '',
              description: skill.description || '',
              examples: Array.isArray(skill.examples) && skill.examples.length > 0 ? skill.examples : [''],
              tags: Array.isArray(skill.tags) && skill.tags.length > 0 ? skill.tags : ['']
            }));

            if (topLevelSkills.length > 0) {
              setExtensionSkillsList(topLevelSkills);
            }
          }
          // Then, check if skills are inside the extensions array (OASF format)
          else if (cardData.extensions && Array.isArray(cardData.extensions)) {
            const a2aExtension = cardData.extensions.find(ext => ext.name === 'schema.oasf.agntcy.org/features/a2a');
            if (a2aExtension && a2aExtension.data && a2aExtension.data.skills && Array.isArray(a2aExtension.data.skills)) {
              // Update extensionSkillsList with skills from the A2A extension
              const extensionSkills = a2aExtension.data.skills.map(skill => ({
                id: skill.id || '',
                name: skill.name || '',
                description: skill.description || '',
                examples: Array.isArray(skill.examples) && skill.examples.length > 0 ? skill.examples : [''],
                tags: Array.isArray(skill.tags) && skill.tags.length > 0 ? skill.tags : ['']
              }));

              if (extensionSkills.length > 0) {
                setExtensionSkillsList(extensionSkills);
              }
            }
          }

          // Load authors if they exist in the card data
          if (cardData.authors && Array.isArray(cardData.authors)) {
            const filteredAuthors = cardData.authors.filter(author => author && author.trim() !== '');
            if (filteredAuthors.length > 0) {
              setAuthorsList(filteredAuthors);
            }
          }

          setForm(newForm);
          setFormModified(true);
          setLoadingCard(false);
        }
      };

      // Fetch latest OASF version and record JSON on mount
      React.useEffect(() => {
        async function fetchData() {
          try {
            setLoading(true);
            setError(null);
            const version = await fetchLatestVersion();
            setLatestVersion(version);
            const record = await fetchRecordJson(version);
            setRecordJson(record);
          } catch (err) {
            console.error('Error fetching data:', err);
            setError('Failed to fetch OASF data. Using default values.');
          } finally {
            setLoading(false);
          }
        }
        fetchData();
      }, []);

      // Add warning when user tries to refresh or leave the page
      React.useEffect(() => {
        const handleBeforeUnload = (e) => {
          if (formModified) {
            e.preventDefault();
            e.returnValue = 'You have unsaved changes. Are you sure you want to leave?';
            return e.returnValue;
          }
        };

        window.addEventListener('beforeunload', handleBeforeUnload);

        return () => {
          window.removeEventListener('beforeunload', handleBeforeUnload);
        };
      }, [formModified]);
      const [annotationKey, setAnnotationKey] = React.useState('');
      const [annotationValue, setAnnotationValue] = React.useState('');
      const [output, setOutput] = React.useState('');

      const handleChange = (e, key) => {
        let newValue;

        // Handle different input types
        if (e.target.type === 'checkbox') {
          newValue = e.target.checked;
        } else {
          newValue = e.target.value;
        }

        const updatedForm = { ...form, [key]: newValue };

        setForm(updatedForm);
        setFormModified(true); // Mark form as modified
      };

      const addAnnotation = () => {
        if (annotationKey.trim() !== '') {
          const annotation = `${annotationKey.trim()}=${annotationValue.trim() || ''}`;
          setForm({ ...form, annotations: [...form.annotations, annotation] });
          setAnnotationKey('');
          setAnnotationValue('');
          setFormModified(true); // Mark form as modified
        }
      };

      const removeAnnotation = (index) => {
        const newAnnotations = [...form.annotations];
        newAnnotations.splice(index, 1);
        setForm({ ...form, annotations: newAnnotations });
        setFormModified(true); // Mark form as modified
      };

      const generate = () => {
        if (!formModified && recordJson) {
          setOutput(JSON.stringify(recordJson, null, 2));
          return;
        }

        // Validate mandatory fields
        const currentSchema = schemas[cardType];
        const missingFields = [];

        currentSchema.forEach(field => {
          if (field.required && (!form[field.key] || form[field.key].trim() === '')) {
            missingFields.push(field.label);
          }
        });

        if (missingFields.length > 0) {
          setError(`Please fill in all mandatory fields: ${missingFields.join(', ')}`);
          return;
        }

        // Clear any previous errors
        setError(null);

        let extensions = [];

        // Create A2A extension data
        if (cardType === 'A2A') {
          const a2aData = {
            capabilities: {
              pushNotifications: form.capabilities_pushNotifications || false,
              streaming: form.capabilities_streaming || false
            },
            defaultInputModes: inputModesList.filter(mode => mode.trim() !== ''),
            defaultOutputModes: outputModesList.filter(mode => mode.trim() !== ''),
            description: form.description || "Sample A2A Agent",
            name: form.name || "Sample A2A Agent",
            protocolVersion: form.protocolVersion || "0.2.6",
            url: form.url || "http://localhost:8000/",
            version: form.version || "0.1.0",
            skills: extensionSkillsList.map(skill => {
              return {
                description: skill.description,
                examples: skill.examples.filter(example => example.trim() !== ''),
                id: skill.id,
                name: skill.name,
                tags: skill.tags.filter(tag => tag.trim() !== '')
              };
            })
          };

          extensions.push({
            "data": a2aData,
            "name": "schema.oasf.agntcy.org/features/a2a"
          });
        }

        // Create MCP extension data
        if (cardType === 'MCP') {
          // Process servers from the serversList state
          const processedServers = serversList.map(server => {
            // Convert environment variables from array of objects to object
            const envVars = {};
            server.envVars.forEach(env => {
              if (env.key.trim() !== '') {
                envVars[env.key] = env.value;
              }
            });

            return {
              name: server.name || `Server ${server.id}`,
              type: server.type || "Streamable HTTP",
              url: server.url || "https://www.example.com/mcp",
              env: Object.keys(envVars).length > 0 ? envVars : {
                "foo": "bar",
                "baz": "qux"
              }
            };
          });

          const mcpData = {
            servers: processedServers.length > 0 ? processedServers : [
              {
                name: "Sample MCP Server",
                type: "Streamable HTTP",
                url: "https://www.example.com/mcp",
                env: {
                  "foo": "bar",
                  "baz": "qux"
                }
              }
            ]
          };

          extensions.push({
            "data": mcpData,
            "name": "schema.oasf.agntcy.org/features/mcp"
          });
        }

        // Create the full record structure
        const currentDate = new Date().toISOString();
        const fullRecord = {
          "name": form.agentDirOrgRepo || "Sample OASF Record",
          "version": form.version || "v2.0",
          "description": form.description || "Sample OASF Record Description",
          "signature": {
            "signature": "ol",
            "signed_at": currentDate,
            "content_type": "application/json",
            "certificate": "self-signed",
            "algorithm": "none",
            "content_bundle": "lm"
          },
          "extensions": extensions,
          "skills": oasfSkillsList.map(skill => ({
            "class_uid": skill.class_uid,
            "category_uid": skill.category_uid,
            "category_name": skill.category_name,
            "class_name": skill.class_name
          })),
          "schema_version": latestVersion || "v0.5.0",
          "authors": authorsList.filter(author => author.trim() !== ''),
          "created_at": currentDate,
          "locators": locatorsList.map(locator => ({
            "type": locator.type,
            "url": locator.url
          }))
        };

        const jsonOutput = JSON.stringify(fullRecord, null, 2);
        console.log('Setting output:', jsonOutput);
        setOutput(jsonOutput);
        // Keep formModified true since user still has unsaved changes that would be lost on refresh
      };

      const copyToClipboard = () => {
        navigator.clipboard.writeText(output);
        showToast();
      };

      const downloadJSON = () => {
        // The output is already in the correct format, so we can just use it directly
        const fileName = (form.name || 'agent-card').replace(/[^a-z0-9-]/gi, '-').toLowerCase() + '.json';

        // Create a blob with the JSON data
        const blob = new Blob([output], { type: 'application/json' });
        const url = URL.createObjectURL(blob);

        // Create a temporary link element to trigger the download
        const link = document.createElement('a');
        link.href = url;
        link.download = fileName;
        document.body.appendChild(link);
        link.click();

        // Clean up
        document.body.removeChild(link);
        URL.revokeObjectURL(url);
      };

      return React.createElement('div', { className: 'container' }, [
        React.createElement('h1', {}, '🔮 AGNTCY OASF Agent Card Generator 🔮'),
        React.createElement('div', {
          style: {
            padding: '16px',
            marginBottom: '24px',
            background: 'var(--accent-light)',
            borderRadius: 'var(--radius)',
            fontSize: '0.875rem',
            textAlign: 'center',
            border: '1px solid var(--border-color)',
            color: 'var(--fg)'
          }
        }, '🔒 This is a browser-only tool. No data is transmitted outside of your browser. 🔒'),
        loading ? React.createElement('div', { className: 'loading' }, [
          React.createElement('div', { className: 'loading-spinner' }),
          React.createElement('span', {}, 'Loading OASF schema version...')
        ]) : null,
        error ? React.createElement('div', { className: 'error-message' }, error) : null,
        latestVersion ? React.createElement('div', {
          style: {
            padding: '16px',
            marginBottom: '24px',
            background: 'var(--primary-light)',
            borderRadius: 'var(--radius)',
            fontSize: '0.875rem',
            textAlign: 'center',
            border: '1px solid var(--border-color)',
            color: 'var(--fg)'
          }
        }, [
          'Using latest ',
          React.createElement('a', {
            href: `https://schema.oasf.outshift.com/${latestVersion}`,
            target: '_blank',
            style: { textDecoration: 'underline', color: 'var(--primary)' }
          }, `OASF schema version: ${latestVersion}`)
        ]) : null,

        // Card Type Selection
        React.createElement('label', {}, 'Card Type'),
        React.createElement('select', {
          value: cardType,
          onChange: e => {
            setCardType(e.target.value);
            // Clear URL input when switching to MCP
            if (e.target.value === 'MCP') {
              setCardUrl('');
            }
          }
        }, [
          React.createElement('option', { key: 'a2a-option', value: 'A2A' }, 'A2A'),
          React.createElement('option', { key: 'mcp-option', value: 'MCP' }, 'MCP')
        ]),

        // Add spacing
        React.createElement('div', { style: { marginTop: '20px' } }),

        // A2A Card URL input - only show for A2A card type
        cardType === 'A2A' ? React.createElement('div', { className: 'url-input-container' }, [
          React.createElement('div', { className: 'example-link' }, [
            React.createElement('span', {}, 'Example: '),
            React.createElement('a', {
              href: '#',
              onClick: (e) => {
                e.preventDefault();
                setCardUrl('https://raw.githubusercontent.com/sriaradhyula/generate-agntcy-oasf-card/refs/heads/main/.well-known/agent.json');
              },
              style: { color: 'var(--primary)', textDecoration: 'underline' }
            }, 'https://raw.githubusercontent.com/sriaradhyula/generate-agntcy-oasf-card/refs/heads/main/.well-known/agent.json')
          ]),
          React.createElement('textarea', {
            className: 'url-input',
            placeholder: 'Enter A2A card URL (e.g. https://localhost:8000/.well-known/agent.json) or JSON data',
            value: cardUrl,
            onChange: e => setCardUrl(e.target.value),
            onPaste: e => {
              // Get pasted content
              const pastedText = e.clipboardData.getData('text');

              // Check if it looks like JSON but isn't properly formatted
              if (pastedText.includes('{') && pastedText.includes('}')) {
                try {
                  // Try to parse and format the JSON
                  const jsonObj = JSON.parse(pastedText);
                  const formattedJson = JSON.stringify(jsonObj, null, 2);

                  // Prevent default paste and use formatted JSON
                  e.preventDefault();
                  setCardUrl(formattedJson);

                  // Dynamically adjust the height based on content
                  setTimeout(() => {
                    const lines = formattedJson.split('\n').length;
                    const newHeight = Math.min(Math.max(lines * 20, 100), 400); // Min 100px, max 400px
                    document.querySelector('.url-input').style.height = `${newHeight}px`;
                  }, 0);
                } catch (error) {
                  // If it's not valid JSON, just let the default paste happen
                  console.warn('Pasted content is not valid JSON:', error);
                }
              }
            },
            rows: 4,
            spellCheck: false
          }),
          React.createElement('button', {
            className: 'url-button',
            onClick: loadCardData,
            disabled: loadingCard || !cardUrl.trim()
          }, React.createElement('div', { className: 'url-button-content' },
            loadingCard ? [
              React.createElement('div', { className: 'loading-spinner', style: { width: '16px', height: '16px', marginRight: '8px' } }),
              'Loading...'
            ] : '🔃 Load A2A Card'
          ))
        ]) : null,

        // Error message for card loading
        cardType === 'A2A' && error && cardUrl ? React.createElement('div', { className: 'error-message' }, error) : null,


        ...schemas[cardType].map(attr => {
          // Only show fields that are not extension-specific or match the current card type
          if (attr.extensionField && attr.extensionType.toLowerCase() !== cardType.toLowerCase()) {
            return null;
          }

          return React.createElement('div', {}, [
            React.createElement('label', {}, attr.label + (attr.required ? ' *' : '')),
            attr.type === 'annotations' ? React.createElement('div', {}, [
              form.annotations.map((ann, i) => React.createElement('span', { className: 'annotation-tag' }, [
                ann,
                React.createElement('button', { onClick: () => removeAnnotation(i) }, 'Remove')
              ])),
              React.createElement('div', { style: { display: 'flex', gap: '10px' } }, [
                React.createElement('input', {
                  type: 'text',
                  value: annotationKey,
                  onChange: e => setAnnotationKey(e.target.value),
                  placeholder: 'Key'
                }),
                React.createElement('input', {
                  type: 'text',
                  value: annotationValue,
                  onChange: e => setAnnotationValue(e.target.value),
                  placeholder: 'Value'
                }),
                React.createElement('button', {
                  onClick: addAnnotation,
                  style: { marginTop: '0' }
                }, 'Add')
              ])
            ]) : attr.type === 'checkbox' ? React.createElement('input', {
              type: 'checkbox',
              checked: form[attr.key] || false,
              onChange: e => handleChange(e, attr.key)
            }) : attr.type === 'textarea' ? React.createElement('textarea', {
              value: form[attr.key] || '',
              onChange: e => handleChange(e, attr.key),
              rows: 5,
              style: {
                width: '100%',
                padding: '8px',
                border: '1px solid var(--border-color, #ccc)',
                borderRadius: '4px',
                fontFamily: 'inherit',
                resize: 'vertical',
                backgroundColor: 'var(--input-bg, #fff)',
                color: 'var(--input-fg, #333)'
              }
            }) : attr.type === 'h4-header' ? React.createElement('h4', { style: { marginTop: '24px', marginBottom: '8px', color: '#333', fontSize: '18px', fontWeight: 'bold' } }, attr.content
            ) : attr.type === 'extension-skills-list' ? React.createElement('div', { className: 'server-list-container', style: { backgroundColor: 'var(--primary-light)', padding: '24px', borderRadius: 'var(--radius-lg)', marginBottom: '24px', border: '1px solid var(--border-color)' } },
                extensionSkillsList.map((skill, skillIndex) => {
                return React.createElement('div', { key: skillIndex, className: 'server-container' }, [
                  // Skill header with name and remove button
                  React.createElement('div', { className: 'server-header' }, [
                    React.createElement('h3', { style: { margin: '0', flex: '1' } }, `Skill ${skillIndex + 1}: ${skill.name || 'New Skill'}`),
                    extensionSkillsList.length > 1 ? React.createElement('button', {
                      onClick: () => {
                        const newList = extensionSkillsList.filter((_, i) => i !== skillIndex);
                        setExtensionSkillsList(newList);
                      },
                      style: {
                        padding: '8px 16px',
                        backgroundColor: 'var(--danger)',
                        color: 'white',
                        border: 'none',
                        borderRadius: 'var(--radius)',
                        cursor: 'pointer',
                        fontSize: '0.875rem',
                        fontWeight: '500',
                        transition: 'var(--transition)'
                      }
                    }, 'Remove Skill') : null
                  ]),

                  // Skill fields
                  React.createElement('div', { className: 'server-fields' }, [
                    // ID field
                    React.createElement('div', { className: 'server-field' }, [
                      React.createElement('label', {}, 'Skill ID'),
                      React.createElement('input', {
                        type: 'text',
                        value: skill.id,
                        onChange: (e) => {
                          const newList = [...extensionSkillsList];
                          newList[skillIndex].id = e.target.value;
                          setExtensionSkillsList(newList);
                        },
                        style: {
                          width: '100%',
                          padding: '8px',
                          border: '1px solid var(--border-color, #ccc)',
                          borderRadius: '4px',
                          backgroundColor: 'var(--input-bg, #fff)',
                          color: 'var(--input-fg, #333)'
                        }
                      })
                    ]),

                    // Name field
                    React.createElement('div', { className: 'server-field' }, [
                      React.createElement('label', {}, 'Skill Name'),
                      React.createElement('input', {
                        type: 'text',
                        value: skill.name,
                        onChange: (e) => {
                          const newList = [...extensionSkillsList];
                          newList[skillIndex].name = e.target.value;
                          setExtensionSkillsList(newList);
                        },
                        style: {
                          width: '100%',
                          padding: '8px',
                          border: '1px solid var(--border-color, #ccc)',
                          borderRadius: '4px',
                          backgroundColor: 'var(--input-bg, #fff)',
                          color: 'var(--input-fg, #333)'
                        }
                      })
                    ]),

                    // Description field
                    React.createElement('div', { className: 'server-field' }, [
                      React.createElement('label', {}, 'Description'),
                      React.createElement('textarea', {
                        value: skill.description,
                        onChange: (e) => {
                          const newList = [...extensionSkillsList];
                          newList[skillIndex].description = e.target.value;
                          setExtensionSkillsList(newList);
                        },
                        rows: 3,
                        style: {
                          width: '100%',
                          padding: '8px',
                          border: '1px solid var(--border-color, #ccc)',
                          borderRadius: '4px',
                          fontFamily: 'inherit',
                          resize: 'vertical',
                          backgroundColor: 'var(--input-bg, #fff)',
                          color: 'var(--input-fg, #333)'
                        }
                      })
                    ]),

                    // Skill Examples
                    React.createElement('div', { className: 'server-field' }, [
                      React.createElement('label', {}, 'Skill Examples'),
                      React.createElement('div', { className: 'dynamic-list-container' },
                        skill.examples.map((example, exampleIndex) => {
                          return React.createElement('div', { key: exampleIndex, className: 'dynamic-list-item' }, [
                            // Example input
                            React.createElement('input', {
                              type: 'text',
                              value: example,
                              placeholder: 'Enter skill example',
                              onChange: (e) => {
                                const newSkillsList = [...extensionSkillsList];
                                newSkillsList[skillIndex].examples[exampleIndex] = e.target.value;
                                setExtensionSkillsList(newSkillsList);
                              },
                              onKeyPress: (e) => {
                                if (e.key === 'Enter' && !e.shiftKey) {
                                  e.preventDefault();
                                  const newSkillsList = [...extensionSkillsList];
                                  newSkillsList[skillIndex].examples.push('');
                                  setExtensionSkillsList(newSkillsList);
                                }
                              },
                              style: {
                                width: '100%',
                                padding: '8px',
                                border: '1px solid var(--border-color, #ccc)',
                                borderRadius: '4px',
                                backgroundColor: 'var(--input-bg, #fff)',
                                color: 'var(--input-fg, #333)'
                              }
                            }),
                            // Remove button
                            React.createElement('button', {
                              onClick: () => {
                                if (skill.examples.length <= 1) return;
                                const newSkillsList = [...extensionSkillsList];
                                newSkillsList[skillIndex].examples = skill.examples.filter((_, i) => i !== exampleIndex);
                                setExtensionSkillsList(newSkillsList);
                              },
                              disabled: skill.examples.length <= 1,
                              style: {
                                marginLeft: '8px',
                                marginBottom: '16px',
                                padding: '4px 8px',
                                backgroundColor: 'var(--danger, #cf6679)',
                                color: 'white',
                                border: 'none',
                                borderRadius: '4px',
                                cursor: 'pointer'
                              }
                            }, 'Remove')
                          ]);
                        })
                      ),
                      // Add example button
                      React.createElement('button', {
                        onClick: () => {
                          const newSkillsList = [...extensionSkillsList];
                          newSkillsList[skillIndex].examples.push('');
                          setExtensionSkillsList(newSkillsList);
                        },
                        style: {
                          marginTop: '8px',
                          padding: '4px 8px',
                          backgroundColor: 'var(--primary)',
                          color: 'white',
                          border: 'none',
                          borderRadius: '4px',
                          cursor: 'pointer'
                        }
                      }, '+ Add Example')
                    ]),

                    // Skill Tags
                    React.createElement('div', { className: 'server-field' }, [
                      React.createElement('label', {}, 'Skill Tags'),
                      React.createElement('div', { className: 'dynamic-list-container' },
                        skill.tags.map((tag, tagIndex) => {
                          return React.createElement('div', { key: tagIndex, className: 'dynamic-list-item' }, [
                            // Tag input
                            React.createElement('input', {
                              type: 'text',
                              value: tag,
                              placeholder: 'Enter skill tag',
                              onChange: (e) => {
                                const newSkillsList = [...extensionSkillsList];
                                newSkillsList[skillIndex].tags[tagIndex] = e.target.value;
                                setExtensionSkillsList(newSkillsList);
                              },
                              onKeyPress: (e) => {
                                if (e.key === 'Enter' && !e.shiftKey) {
                                  e.preventDefault();
                                  const newSkillsList = [...extensionSkillsList];
                                  newSkillsList[skillIndex].tags.push('');
                                  setExtensionSkillsList(newSkillsList);
                                }
                              },
                              style: {
                                width: '100%',
                                padding: '8px',
                                border: '1px solid var(--border-color, #ccc)',
                                borderRadius: '4px',
                                backgroundColor: 'var(--input-bg, #fff)',
                                color: 'var(--input-fg, #333)'
                              }
                            }),
                            // Remove button
                            React.createElement('button', {
                              onClick: () => {
                                if (skill.tags.length <= 1) return;
                                const newSkillsList = [...extensionSkillsList];
                                newSkillsList[skillIndex].tags = skill.tags.filter((_, i) => i !== tagIndex);
                                setExtensionSkillsList(newSkillsList);
                              },
                              disabled: skill.tags.length <= 1,
                              style: {
                                marginBottom: '16px',
                                padding: '4px 8px',
                                backgroundColor: 'var(--danger, #cf6679)',
                                color: 'white',
                                border: 'none',
                                borderRadius: '4px',
                                cursor: 'pointer'
                              }
                            }, 'Remove')
                          ]);
                        })
                      ),
                      // Add tag button
                      React.createElement('button', {
                        onClick: () => {
                          const newSkillsList = [...extensionSkillsList];
                          newSkillsList[skillIndex].tags.push('');
                          setExtensionSkillsList(newSkillsList);
                        },
                        style: {
                          marginTop: '8px',
                          padding: '4px 8px',
                          backgroundColor: 'var(--primary)',
                          color: 'white',
                          border: 'none',
                          borderRadius: '4px',
                          cursor: 'pointer'
                        }
                      }, '+ Add Tag')
                    ])
                  ])
                ]);
              }),
              // Add skill button
              React.createElement('button', {
                onClick: () => {
                  setExtensionSkillsList([
                    ...extensionSkillsList,
                    {
                      id: `skill_${extensionSkillsList.length + 1}`,
                      name: 'New Skill',
                      description: '',
                      examples: [''],
                      tags: ['']
                    }
                  ]);
                },
                style: {
                  marginTop: '16px',
                  padding: '8px 16px',
                  backgroundColor: 'var(--primary)',
                  color: 'white',
                  border: 'none',
                  borderRadius: '4px',
                  cursor: 'pointer',
                  width: '100%'
                }
              }, '+ Add Skill')
            ) : attr.type === 'oasf-skills-list' ? React.createElement('div', { className: 'server-list-container', style: { backgroundColor: 'var(--accent-light)', padding: '24px', borderRadius: 'var(--radius-lg)', marginBottom: '24px', border: '1px solid var(--border-color)' } },
              oasfSkillsList.map((skill, skillIndex) => {
                return React.createElement('div', { key: skillIndex, className: 'server-container' }, [
                  // Skill header with name and remove button
                  React.createElement('div', { className: 'server-header' }, [
                    React.createElement('h3', { style: { margin: '0', flex: '1' } }, `OASF Skill ${skillIndex + 1}: ${skill.class_name || 'New Skill'}`),
                    oasfSkillsList.length > 1 ? React.createElement('button', {
                      onClick: () => {
                        const newList = oasfSkillsList.filter((_, i) => i !== skillIndex);
                        setOasfSkillsList(newList);
                      },
                      style: {
                        padding: '4px 8px',
                        backgroundColor: 'var(--danger, #cf6679)',
                        color: 'white',
                        border: 'none',
                        borderRadius: '4px',
                        cursor: 'pointer'
                      }
                    }, 'Remove Skill') : null
                  ]),

                  // Skill fields
                  React.createElement('div', { className: 'server-fields' }, [
                    // Class UID field
                    React.createElement('div', { className: 'server-field' }, [
                      React.createElement('label', {}, 'Class UID'),
                      React.createElement('input', {
                        type: 'number',
                        value: skill.class_uid,
                        onChange: (e) => {
                          const newList = [...oasfSkillsList];
                          newList[skillIndex].class_uid = parseInt(e.target.value) || 0;
                          setOasfSkillsList(newList);
                        },
                        style: {
                          width: '100%',
                          padding: '8px',
                          border: '1px solid var(--border-color, #ccc)',
                          borderRadius: '4px',
                          backgroundColor: 'var(--input-bg, #fff)',
                          color: 'var(--input-fg, #333)'
                        }
                      })
                    ]),

                    // Category UID field
                    React.createElement('div', { className: 'server-field' }, [
                      React.createElement('label', {}, 'Category UID'),
                      React.createElement('input', {
                        type: 'number',
                        value: skill.category_uid,
                        onChange: (e) => {
                          const newList = [...oasfSkillsList];
                          newList[skillIndex].category_uid = parseInt(e.target.value) || 0;
                          setOasfSkillsList(newList);
                        },
                        style: {
                          width: '100%',
                          padding: '8px',
                          border: '1px solid var(--border-color, #ccc)',
                          borderRadius: '4px',
                          backgroundColor: 'var(--input-bg, #fff)',
                          color: 'var(--input-fg, #333)'
                        }
                      })
                    ]),

                    // Category Name field
                    React.createElement('div', { className: 'server-field' }, [
                      React.createElement('label', {}, 'Category Name'),
                      React.createElement('input', {
                        type: 'text',
                        value: skill.category_name,
                        onChange: (e) => {
                          const newList = [...oasfSkillsList];
                          newList[skillIndex].category_name = e.target.value;
                          setOasfSkillsList(newList);
                        },
                        style: {
                          width: '100%',
                          padding: '8px',
                          border: '1px solid var(--border-color, #ccc)',
                          borderRadius: '4px',
                          backgroundColor: 'var(--input-bg, #fff)',
                          color: 'var(--input-fg, #333)'
                        }
                      })
                    ]),

                    // Class Name field
                    React.createElement('div', { className: 'server-field' }, [
                      React.createElement('label', {}, 'Class Name'),
                      React.createElement('input', {
                        type: 'text',
                        value: skill.class_name,
                        onChange: (e) => {
                          const newList = [...oasfSkillsList];
                          newList[skillIndex].class_name = e.target.value;
                          setOasfSkillsList(newList);
                        },
                        style: {
                          width: '100%',
                          padding: '8px',
                          border: '1px solid var(--border-color, #ccc)',
                          borderRadius: '4px',
                          backgroundColor: 'var(--input-bg, #fff)',
                          color: 'var(--input-fg, #333)'
                        }
                      })
                    ])
                  ])
                ]);
              }),
              // Add skill button
              React.createElement('button', {
                onClick: () => {
                  setOasfSkillsList([
                    ...oasfSkillsList,
                    {
                      class_uid: 10101,
                      category_uid: 1,
                      category_name: 'Natural Language Processing',
                      class_name: 'Contextual Comprehension',
                      description: '',
                      examples: [''],
                      tags: ['']
                    }
                  ]);
                },
                style: {
                  marginTop: '16px',
                  padding: '8px 16px',
                  backgroundColor: 'var(--primary)',
                  color: 'white',
                  border: 'none',
                  borderRadius: '4px',
                  cursor: 'pointer',
                  width: '100%'
                }
              }, '+ Add OASF Skill')
            ) : attr.type === 'locators-list' ? React.createElement('div', { className: 'server-list-container', style: { backgroundColor: 'var(--warning-light)', padding: '24px', borderRadius: 'var(--radius-lg)', marginBottom: '24px', border: '1px solid var(--border-color)' } },
              locatorsList.map((locator, locatorIndex) => {
                return React.createElement('div', { key: locatorIndex, className: 'server-container' }, [
                  // Locator header with type and remove button
                  React.createElement('div', { className: 'server-header' }, [
                    React.createElement('h3', { style: { margin: '0', flex: '1' } }, `Locator ${locatorIndex + 1}: ${locator.type || 'New Locator'}`),
                    locatorsList.length > 1 ? React.createElement('button', {
                      onClick: () => {
                        const newList = locatorsList.filter((_, i) => i !== locatorIndex);
                        setLocatorsList(newList);
                      },
                      style: {
                        padding: '4px 8px',
                        backgroundColor: 'var(--danger, #cf6679)',
                        color: 'white',
                        border: 'none',
                        borderRadius: '4px',
                        cursor: 'pointer'
                      }
                    }, 'Remove Locator') : null
                  ]),

                  // Locator fields
                  React.createElement('div', { className: 'server-fields' }, [
                    // Type field
                    React.createElement('div', { className: 'server-field' }, [
                      React.createElement('label', {}, 'Type'),
                      React.createElement('input', {
                        type: 'text',
                        value: locator.type,
                        onChange: (e) => {
                          const newList = [...locatorsList];
                          newList[locatorIndex].type = e.target.value;
                          setLocatorsList(newList);
                        },
                        style: {
                          width: '100%',
                          padding: '8px',
                          border: '1px solid var(--border-color, #ccc)',
                          borderRadius: '4px',
                          backgroundColor: 'var(--input-bg, #fff)',
                          color: 'var(--input-fg, #333)'
                        }
                      })
                    ]),

                    // URL field
                    React.createElement('div', { className: 'server-field' }, [
                      React.createElement('label', {}, 'URL'),
                      React.createElement('input', {
                        type: 'text',
                        value: locator.url,
                        onChange: (e) => {
                          const newList = [...locatorsList];
                          newList[locatorIndex].url = e.target.value;
                          setLocatorsList(newList);
                        },
                        style: {
                          width: '100%',
                          padding: '8px',
                          border: '1px solid var(--border-color, #ccc)',
                          borderRadius: '4px',
                          backgroundColor: 'var(--input-bg, #fff)',
                          color: 'var(--input-fg, #333)'
                        }
                      })
                    ])
                  ])
                ]);
              }),
              // Add locator button
              React.createElement('button', {
                onClick: () => {
                  setLocatorsList([
                    ...locatorsList,
                    {
                      type: 'source_code',
                      url: 'https://github.com/'
                    }
                  ]);
                },
                style: {
                  marginTop: '16px',
                  padding: '8px 16px',
                  backgroundColor: 'var(--primary)',
                  color: 'white',
                  border: 'none',
                  borderRadius: '4px',
                  cursor: 'pointer',
                  width: '100%'
                }
              }, '+ Add Locator')
            ) : attr.type === 'skills-list' ? React.createElement('div', { className: 'server-list-container' },
              skillsList.map((skill, skillIndex) => {
                return React.createElement('div', { key: skillIndex, className: 'server-container' }, [
                  // Skill header with name and remove button
                  React.createElement('div', { className: 'server-header' }, [
                    React.createElement('h3', { style: { margin: '0', flex: '1' } }, `Skill ${skillIndex + 1}: ${skill.class_name || 'New Skill'}`),
                    skillsList.length > 1 ? React.createElement('button', {
                      onClick: () => {
                        const newList = skillsList.filter((_, i) => i !== skillIndex);
                        setSkillsList(newList);
                      },
                      style: {
                        padding: '4px 8px',
                        backgroundColor: 'var(--danger, #cf6679)',
                        color: 'white',
                        border: 'none',
                        borderRadius: '4px',
                        cursor: 'pointer'
                      }
                    }, 'Remove Skill') : null
                  ]),

                  // Skill fields
                  React.createElement('div', { className: 'server-fields' }, [
                    // Class UID field
                    React.createElement('div', { className: 'server-field' }, [
                      React.createElement('label', {}, 'Class UID'),
                      React.createElement('input', {
                        type: 'number',
                        value: skill.class_uid,
                        onChange: (e) => {
                          const newList = [...skillsList];
                          newList[skillIndex].class_uid = parseInt(e.target.value) || 0;
                          setSkillsList(newList);
                        },
                        style: {
                          width: '100%',
                          padding: '8px',
                          border: '1px solid var(--border-color, #ccc)',
                          borderRadius: '4px',
                          backgroundColor: 'var(--input-bg, #fff)',
                          color: 'var(--input-fg, #333)'
                        }
                      })
                    ]),

                    // Category UID field
                    React.createElement('div', { className: 'server-field' }, [
                      React.createElement('label', {}, 'Category UID'),
                      React.createElement('input', {
                        type: 'number',
                        value: skill.category_uid,
                        onChange: (e) => {
                          const newList = [...skillsList];
                          newList[skillIndex].category_uid = parseInt(e.target.value) || 0;
                          setSkillsList(newList);
                        },
                        style: {
                          width: '100%',
                          padding: '8px',
                          border: '1px solid var(--border-color, #ccc)',
                          borderRadius: '4px',
                          backgroundColor: 'var(--input-bg, #fff)',
                          color: 'var(--input-fg, #333)'
                        }
                      })
                    ]),

                    // Category Name field
                    React.createElement('div', { className: 'server-field' }, [
                      React.createElement('label', {}, 'Category Name'),
                      React.createElement('input', {
                        type: 'text',
                        value: skill.category_name,
                        onChange: (e) => {
                          const newList = [...skillsList];
                          newList[skillIndex].category_name = e.target.value;
                          setSkillsList(newList);
                        },
                        style: {
                          width: '100%',
                          padding: '8px',
                          border: '1px solid var(--border-color, #ccc)',
                          borderRadius: '4px',
                          backgroundColor: 'var(--input-bg, #fff)',
                          color: 'var(--input-fg, #333)'
                        }
                      })
                    ]),

                    // Class Name field
                    React.createElement('div', { className: 'server-field' }, [
                      React.createElement('label', {}, 'Class Name'),
                      React.createElement('input', {
                        type: 'text',
                        value: skill.class_name,
                        onChange: (e) => {
                          const newList = [...skillsList];
                          newList[skillIndex].class_name = e.target.value;
                          setSkillsList(newList);
                        },
                        style: {
                          width: '100%',
                          padding: '8px',
                          border: '1px solid var(--border-color, #ccc)',
                          borderRadius: '4px',
                          backgroundColor: 'var(--input-bg, #fff)',
                          color: 'var(--input-fg, #333)'
                        }
                      })
                    ]),

                    // Description field
                    React.createElement('div', { className: 'server-field' }, [
                      React.createElement('label', {}, 'Description'),
                      React.createElement('textarea', {
                        value: skill.description,
                        onChange: (e) => {
                          const newList = [...skillsList];
                          newList[skillIndex].description = e.target.value;
                          setSkillsList(newList);
                        },
                        rows: 3,
                        style: {
                          width: '100%',
                          padding: '8px',
                          border: '1px solid var(--border-color, #ccc)',
                          borderRadius: '4px',
                          fontFamily: 'inherit',
                          resize: 'vertical',
                          backgroundColor: 'var(--input-bg, #fff)',
                          color: 'var(--input-fg, #333)'
                        }
                      })
                    ]),

                    // Skill Examples
                    React.createElement('div', { className: 'server-field' }, [
                      React.createElement('label', {}, 'Skill Examples'),
                      React.createElement('div', { className: 'dynamic-list-container' },
                        skill.examples.map((example, exampleIndex) => {
                          return React.createElement('div', { key: exampleIndex, className: 'dynamic-list-item' }, [
                            // Example input
                            React.createElement('input', {
                              type: 'text',
                              value: example,
                              placeholder: 'Enter skill example',
                              onChange: (e) => {
                                const newSkillsList = [...skillsList];
                                newSkillsList[skillIndex].examples[exampleIndex] = e.target.value;
                                setSkillsList(newSkillsList);
                              },
                              onKeyPress: (e) => {
                                if (e.key === 'Enter' && !e.shiftKey) {
                                  e.preventDefault();
                                  const newSkillsList = [...skillsList];
                                  newSkillsList[skillIndex].examples.push('');
                                  setSkillsList(newSkillsList);
                                }
                              },
                              style: {
                                width: '100%',
                                padding: '8px',
                                border: '1px solid var(--border-color, #ccc)',
                                borderRadius: '4px',
                                backgroundColor: 'var(--input-bg, #fff)',
                                color: 'var(--input-fg, #333)'
                              }
                            }),
                            // Remove button
                            React.createElement('button', {
                              onClick: () => {
                                if (skill.examples.length <= 1) return;
                                const newSkillsList = [...skillsList];
                                newSkillsList[skillIndex].examples = skill.examples.filter((_, i) => i !== exampleIndex);
                                setSkillsList(newSkillsList);
                              },
                              disabled: skill.examples.length <= 1,
                              style: {
                                marginBottom: '16px',
                                padding: '4px 8px',
                                backgroundColor: 'var(--danger, #cf6679)',
                                color: 'white',
                                border: 'none',
                                borderRadius: '4px',
                                cursor: 'pointer'
                              }
                            }, 'Remove')
                          ]);
                        })
                      ),
                      // Add example button
                      React.createElement('button', {
                        onClick: () => {
                          const newSkillsList = [...skillsList];
                          newSkillsList[skillIndex].examples.push('');
                          setSkillsList(newSkillsList);
                        },
                        style: {
                          marginTop: '8px',
                          padding: '4px 8px',
                          backgroundColor: 'var(--primary)',
                          color: 'white',
                          border: 'none',
                          borderRadius: '4px',
                          cursor: 'pointer'
                        }
                      }, '+ Add Example')
                    ]),

                    // Skill Tags
                    React.createElement('div', { className: 'server-field' }, [
                      React.createElement('label', {}, 'Skill Tags'),
                      React.createElement('div', { className: 'dynamic-list-container' },
                        skill.tags.map((tag, tagIndex) => {
                          return React.createElement('div', { key: tagIndex, className: 'dynamic-list-item' }, [
                            // Tag input
                            React.createElement('input', {
                              type: 'text',
                              value: tag,
                              placeholder: 'Enter skill tag',
                              onChange: (e) => {
                                const newSkillsList = [...skillsList];
                                newSkillsList[skillIndex].tags[tagIndex] = e.target.value;
                                setSkillsList(newSkillsList);
                              },
                              onKeyPress: (e) => {
                                if (e.key === 'Enter' && !e.shiftKey) {
                                  e.preventDefault();
                                  const newSkillsList = [...skillsList];
                                  newSkillsList[skillIndex].tags.push('');
                                  setSkillsList(newSkillsList);
                                }
                              },
                              style: {
                                width: '100%',
                                padding: '8px',
                                border: '1px solid var(--border-color, #ccc)',
                                borderRadius: '4px',
                                backgroundColor: 'var(--input-bg, #fff)',
                                color: 'var(--input-fg, #333)'
                              }
                            }),
                            // Remove button
                            React.createElement('button', {
                              onClick: () => {
                                if (skill.tags.length <= 1) return;
                                const newSkillsList = [...skillsList];
                                newSkillsList[skillIndex].tags = skill.tags.filter((_, i) => i !== tagIndex);
                                setSkillsList(newSkillsList);
                              },
                              disabled: skill.tags.length <= 1,
                              style: {
                                marginBottom: '16px',
                                padding: '4px 8px',
                                backgroundColor: 'var(--danger, #cf6679)',
                                color: 'white',
                                border: 'none',
                                borderRadius: '4px',
                                cursor: 'pointer'
                              }
                            }, 'Remove')
                          ]);
                        })
                      ),
                      // Add tag button
                      React.createElement('button', {
                        onClick: () => {
                          const newSkillsList = [...skillsList];
                          newSkillsList[skillIndex].tags.push('');
                          setSkillsList(newSkillsList);
                        },
                        style: {
                          marginTop: '8px',
                          padding: '4px 8px',
                          backgroundColor: 'var(--primary)',
                          color: 'white',
                          border: 'none',
                          borderRadius: '4px',
                          cursor: 'pointer'
                        }
                      }, '+ Add Tag')
                    ])
                  ])
                ]);
              }),
              // Add skill button
              React.createElement('button', {
                onClick: () => {
                  const newId = skillsList.length > 0 ? Math.max(...skillsList.map(s => s.id)) + 1 : 1;
                  setSkillsList([
                    ...skillsList,
                    {
                      id: newId,
                      class_uid: 10101,
                      category_uid: 1,
                      category_name: 'Natural Language Processing',
                      class_name: 'Contextual Comprehension',
                      description: '',
                      examples: [''],
                      tags: ['']
                    }
                  ]);
                },
                style: {
                  marginTop: '16px',
                  padding: '8px 16px',
                  backgroundColor: 'var(--primary)',
                  color: 'white',
                  border: 'none',
                  borderRadius: '4px',
                  cursor: 'pointer',
                  width: '100%'
                }
              }, '+ Add Skill')
            ) : attr.type === 'server-list' ? React.createElement('div', { className: 'server-list-container' },
              serversList.map((server, serverIndex) => {
                return React.createElement('div', { key: serverIndex, className: 'server-container' }, [
                  // Server header with name and remove button
                  React.createElement('div', { className: 'server-header' }, [
                    React.createElement('h3', {}, `Server ${server.id}`),
                    serversList.length > 1 ? React.createElement('button', {
                      onClick: () => {
                        const newList = serversList.filter((_, i) => i !== serverIndex);
                        setServersList(newList);
                      },
                      style: {
                        padding: '4px 8px',
                        backgroundColor: 'var(--danger, #cf6679)',
                        color: 'white',
                        border: 'none',
                        borderRadius: '4px',
                        cursor: 'pointer'
                      }
                    }, 'Remove Server') : null
                  ]),

                  // Server fields
                  React.createElement('div', { className: 'server-fields' }, [
                    // Name field
                    React.createElement('div', { className: 'server-field' }, [
                      React.createElement('label', {}, 'Server Name'),
                      React.createElement('input', {
                        type: 'text',
                        value: server.name,
                        onChange: (e) => {
                          const newList = [...serversList];
                          newList[serverIndex].name = e.target.value;
                          setServersList(newList);
                          // Update form state for compatibility
                          handleChange({ target: { value: e.target.value } }, `server${server.id}_name`);
                        },
                        style: {
                          width: '100%',
                          padding: '8px',
                          border: '1px solid var(--border-color, #ccc)',
                          borderRadius: '4px',
                          backgroundColor: 'var(--input-bg, #fff)',
                          color: 'var(--input-fg, #333)'
                        }
                      })
                    ]),

                    // Type field
                    React.createElement('div', { className: 'server-field' }, [
                      React.createElement('label', {}, 'Server Type'),
                      React.createElement('input', {
                        type: 'text',
                        value: server.type,
                        onChange: (e) => {
                          const newList = [...serversList];
                          newList[serverIndex].type = e.target.value;
                          setServersList(newList);
                          // Update form state for compatibility
                          handleChange({ target: { value: e.target.value } }, `server${server.id}_type`);
                        },
                        style: {
                          width: '100%',
                          padding: '8px',
                          border: '1px solid var(--border-color, #ccc)',
                          borderRadius: '4px',
                          backgroundColor: 'var(--input-bg, #fff)',
                          color: 'var(--input-fg, #333)'
                        }
                      })
                    ]),

                    // URL field
                    React.createElement('div', { className: 'server-field' }, [
                      React.createElement('label', {}, 'Server URL'),
                      React.createElement('input', {
                        type: 'text',
                        value: server.url,
                        onChange: (e) => {
                          const newList = [...serversList];
                          newList[serverIndex].url = e.target.value;
                          setServersList(newList);

                          // Update form state for compatibility
                          handleChange({ target: { value: e.target.value } }, `server${server.id}_url`);
                        },
                        style: {
                          width: '100%',
                          padding: '8px',
                          border: '1px solid var(--border-color, #ccc)',
                          borderRadius: '4px',
                          backgroundColor: 'var(--input-bg, #fff)',
                          color: 'var(--input-fg, #333)'
                        }
                      })
                    ]),

                    // Environment Variables
                    React.createElement('div', { className: 'server-field' }, [
                      React.createElement('label', {}, 'Environment Variables'),
                      React.createElement('div', { className: 'dynamic-list-container' },
                        server.envVars.map((envVar, envIndex) => {
                          return React.createElement('div', { key: envIndex, className: 'dynamic-list-item server-env-item' }, [
                            // Key input
                            React.createElement('input', {
                              type: 'text',
                              value: envVar.key,
                              placeholder: 'Environment Variable Key',
                              onChange: (e) => {
                                const newServersList = [...serversList];
                                newServersList[serverIndex].envVars[envIndex].key = e.target.value;
                                setServersList(newServersList);
                              },
                              onKeyPress: (e) => {
                                if (e.key === 'Enter' && !e.shiftKey) {
                                  e.preventDefault();
                                  const newServersList = [...serversList];
                                  newServersList[serverIndex].envVars.push({ key: '', value: '' });
                                  setServersList(newServersList);
                                  // Focus the new input after a short delay to allow React to render
                                  setTimeout(() => {
                                    const inputs = document.querySelectorAll(`[data-server-index="${serverIndex}"][data-env-index="${envIndex + 1}"][data-input-type="key"]`);
                                    if (inputs.length > 0) {
                                      inputs[0].focus();
                                    }
                                  }, 10);
                                }
                              },
                              'data-server-index': serverIndex,
                              'data-env-index': envIndex,
                              'data-input-type': 'key',
                              style: {
                                width: '90%',
                                padding: '8px',
                                border: '1px solid var(--border-color, #ccc)',
                                borderRadius: '4px',
                                backgroundColor: 'var(--input-bg, #fff)',
                                color: 'var(--input-fg, #333)'
                              }
                            }),
                            // Value input
                            React.createElement('input', {
                              type: 'text',
                              value: envVar.value,
                              placeholder: 'Environment Variable Value',
                              onChange: (e) => {
                                const newServersList = [...serversList];
                                newServersList[serverIndex].envVars[envIndex].value = e.target.value;
                                setServersList(newServersList);
                              },
                              onKeyPress: (e) => {
                                if (e.key === 'Enter' && !e.shiftKey) {
                                  e.preventDefault();
                                  const newServersList = [...serversList];
                                  newServersList[serverIndex].envVars.push({ key: '', value: '' });
                                  setServersList(newServersList);
                                  // Focus the new input after a short delay to allow React to render
                                  setTimeout(() => {
                                    const inputs = document.querySelectorAll(`[data-server-index="${serverIndex}"][data-env-index="${envIndex + 1}"][data-input-type="key"]`);
                                    if (inputs.length > 0) {
                                      inputs[0].focus();
                                    }
                                  }, 10);
                                }
                              },
                              'data-server-index': serverIndex,
                              'data-env-index': envIndex,
                              'data-input-type': 'value',
                              style: {
                                width: '90%',
                                marginRight: '0px',
                                border: '1px solid var(--border-color, #ccc)',
                                borderRadius: '4px',
                                backgroundColor: 'var(--input-bg, #fff)',
                                color: 'var(--input-fg, #333)'
                              }
                            }),
                            // Remove button
                            React.createElement('button', {
                              onClick: () => {
                                if (server.envVars.length <= 1) return;
                                const newServersList = [...serversList];
                                newServersList[serverIndex].envVars = server.envVars.filter((_, i) => i !== envIndex);
                                setServersList(newServersList);
                              },
                              disabled: server.envVars.length <= 1,
                              style: {
                                marginBottom: '16px',
                                padding: '4px 8px',
                                backgroundColor: 'var(--danger, #cf6679)',
                                color: 'white',
                                border: 'none',
                                borderRadius: '4px',
                                cursor: 'pointer',
                                opacity: server.envVars.length <= 1 ? 0.5 : 1
                              }
                            }, '×')
                          ]);
                        }).concat([
                          React.createElement('button', {
                            onClick: () => {
                              const newServersList = [...serversList];
                              newServersList[serverIndex].envVars.push({ key: '', value: '' });
                              setServersList(newServersList);
                            },
                            style: {
                              marginTop: '8px',
                              padding: '4px 8px',
                              backgroundColor: 'var(--primary)',
                              color: 'white',
                              border: 'none',
                              borderRadius: '4px',
                              cursor: 'pointer'
                            }
                          }, '+ Add Environment Variable')
                        ])
                      )
                    ])
                  ])
                ]);
              }).concat([
                React.createElement('button', {
                  onClick: () => {
                    const newId = serversList.length > 0 ? Math.max(...serversList.map(s => s.id)) + 1 : 1;
                    setServersList([...serversList, { id: newId, name: '', type: '', url: '', envVars: [{ key: '', value: '' }] }]);
                  },
                  style: {
                    marginTop: '16px',
                    padding: '8px 16px',
                    backgroundColor: 'var(--primary)',
                    color: 'white',
                    border: 'none',
                    borderRadius: '4px',
                    cursor: 'pointer'
                  }
                }, '+ Add Server')
              ])
            ) : attr.type === 'server-env-list' ? React.createElement('div', { className: 'dynamic-list-container' },
              serverEnvList.map((item, index) => {
                return React.createElement('div', { key: index, className: 'dynamic-list-item server-env-item' }, [
                  // Key input
                  React.createElement('input', {
                    type: 'text',
                    value: item.key,
                    placeholder: 'Environment Variable Key',
                    onChange: (e) => {
                      const newList = [...serverEnvList];
                      newList[index].key = e.target.value;
                      setServerEnvList(newList);
                      // Update form state for compatibility
                      handleChange({ target: { value: e.target.value } }, `server1_env_key${index + 1}`);
                    },
                    style: {
                      width: '90%',
                      padding: '8px',
                      border: '1px solid var(--border-color, #ccc)',
                      borderRadius: '4px',
                      backgroundColor: 'var(--input-bg, #fff)',
                      color: 'var(--input-fg, #333)'
                    }
                  }),
                  // Value input
                  React.createElement('input', {
                    type: 'text',
                    value: item.value,
                    placeholder: 'Environment Variable Value',
                    onChange: (e) => {
                      const newList = [...serverEnvList];
                      newList[index].value = e.target.value;
                      setServerEnvList(newList);
                      // Update form state for compatibility
                      handleChange({ target: { value: e.target.value } }, `server1_env_value${index + 1}`);
                    },
                    style: {
                      width: '90%',
                      marginRight: '0px',
                      border: '1px solid var(--border-color, #ccc)',
                      borderRadius: '4px',
                      backgroundColor: 'var(--input-bg, #fff)',
                      color: 'var(--input-fg, #333)'
                    }
                  }),
                  // Remove button
                  React.createElement('button', {
                    onClick: () => {
                      if (serverEnvList.length <= 1) return;
                      const newList = serverEnvList.filter((_, i) => i !== index);
                      setServerEnvList(newList);
                    },
                    disabled: serverEnvList.length <= 1,
                    style: {
                      marginBottom: '16px',
                      padding: '4px 8px',
                      backgroundColor: 'var(--danger, #cf6679)',
                      color: 'white',
                      border: 'none',
                      borderRadius: '4px',
                      cursor: 'pointer',
                      opacity: serverEnvList.length <= 1 ? 0.5 : 1
                    }
                  }, '×')
                ]);
              }).concat([
                React.createElement('button', {
                  onClick: () => {
                    setServerEnvList([...serverEnvList, { key: '', value: '' }]);
                  },
                  style: {
                    marginTop: '8px',
                    padding: '4px 8px',
                    backgroundColor: 'var(--primary)',
                    color: 'white',
                    border: 'none',
                    borderRadius: '4px',
                    cursor: 'pointer'
                  }
                }, '+ Add Environment Variable')
              ])
            ) : attr.type === 'dynamic-list' ? React.createElement('div', { className: 'dynamic-list-container' },
              (attr.key === 'skillExamples' ? skillExamplesList :
               attr.key === 'skillTags' ? skillTagsList :
               attr.key === 'defaultInputModes' ? inputModesList :
               attr.key === 'authors' ? authorsList :
               outputModesList).map((item, index) => {
                return React.createElement('div', { key: index, className: 'dynamic-list-item' }, [
                  React.createElement('input', {
                    type: 'text',
                    value: item,
                    'data-list-index': index,
                    'data-list-type': attr.key,
                    onChange: (e) => {
                      const value = e.target.value;
                      let currentList, setterFunction, updatedList;

                      if (attr.key === 'skillExamples') {
                        currentList = skillExamplesList;
                        setterFunction = setSkillExamplesList;
                      } else if (attr.key === 'skillTags') {
                        currentList = skillTagsList;
                        setterFunction = setSkillTagsList;
                      } else if (attr.key === 'defaultInputModes') {
                        currentList = inputModesList;
                        setterFunction = setInputModesList;
                      } else if (attr.key === 'defaultOutputModes') {
                        currentList = outputModesList;
                        setterFunction = setOutputModesList;
                      } else if (attr.key === 'authors') {
                        currentList = authorsList;
                        setterFunction = setAuthorsList;
                      }

                      handleListItemChange(setterFunction, currentList, index, value);

                      // Also update the form state for compatibility
                      updatedList = [...currentList.slice(0, index), value, ...currentList.slice(index + 1)];
                      const separator = attr.key === 'skillExamples' ? '\n' : ', ';
                      handleChange({ target: { value: updatedList.join(separator) } }, attr.key);
                    },
                    onKeyPress: (e) => {
                      if (attr.key === 'skillExamples') {
                        handleListKeyPress(e, setSkillExamplesList, skillExamplesList, index, 'skillExamples');
                      } else if (attr.key === 'skillTags') {
                        handleListKeyPress(e, setSkillTagsList, skillTagsList, index, 'skillTags');
                      } else if (attr.key === 'defaultInputModes') {
                        handleListKeyPress(e, setInputModesList, inputModesList, index, 'defaultInputModes');
                      } else if (attr.key === 'defaultOutputModes') {
                        handleListKeyPress(e, setOutputModesList, outputModesList, index, 'defaultOutputModes');
                      } else if (attr.key === 'authors') {
                        handleListKeyPress(e, setAuthorsList, authorsList, index, 'authors');
                      }
                    },
                    placeholder: attr.key === 'skillExamples' ? 'Enter example and press Enter for new line' :
                               attr.key === 'skillTags' ? 'Enter tag and press Enter for new tag' :
                               attr.key === 'defaultInputModes' ? 'Enter input mode (e.g. text, text/plain)' :
                               attr.key === 'authors' ? 'Enter author and press Enter for next entry' :
                               attr.key === 'defaultOutputModes' ? 'Enter output mode (e.g. text, text/plain)' :
                               attr.key === 'servers' ? 'Enter server and press Enter for next entry' :
                               'Press Enter to add new entry',
                    style: {
                      flex: 1,
                      padding: '8px',
                      border: '1px solid var(--border-color, #ccc)',
                      borderRadius: '4px',
                      backgroundColor: 'var(--input-bg, #fff)',
                      color: 'var(--input-fg, #333)'
                    }
                  }),
                  React.createElement('button', {
                    onClick: () => {
                      let currentList, setterFunction, updatedList;

                      if (attr.key === 'skillExamples') {
                        currentList = skillExamplesList;
                        setterFunction = setSkillExamplesList;
                      } else if (attr.key === 'skillTags') {
                        currentList = skillTagsList;
                        setterFunction = setSkillTagsList;
                      } else if (attr.key === 'defaultInputModes') {
                        currentList = inputModesList;
                        setterFunction = setInputModesList;
                      } else if (attr.key === 'defaultOutputModes') {
                        currentList = outputModesList;
                        setterFunction = setOutputModesList;
                      } else if (attr.key === 'authors') {
                        currentList = authorsList;
                        setterFunction = setAuthorsList;
                      }

                      handleRemoveListItem(setterFunction, currentList, index);

                      // Also update the form state for compatibility
                      updatedList = currentList.filter((_, i) => i !== index);
                      const separator = attr.key === 'skillExamples' ? '\n' : ', ';
                      handleChange({ target: { value: updatedList.join(separator) } }, attr.key);
                    },
                    disabled: (attr.key === 'skillExamples' ? skillExamplesList :
                              attr.key === 'skillTags' ? skillTagsList :
                              attr.key === 'defaultInputModes' ? inputModesList :
                              attr.key === 'defaultOutputModes' ? outputModesList :
                              attr.key === 'servers' ? serversList :
                              attr.key === 'authors' ? authorsList :
                              outputModesList).length <= 1,
                    style: {
                      marginLeft: '8px',
                      marginBottom: '14px',
                      padding: '4px 8px',
                      backgroundColor: 'var(--danger, #cf6679)',
                      color: 'white',
                      border: 'none',
                      borderRadius: '4px',
                      cursor: 'pointer',
                      alignItems: 'top',
                      justifyContent: 'top',
                      opacity: (attr.key === 'skillExamples' ? skillExamplesList : skillTagsList).length <= 1 ? 0.5 : 1
                    }
                  }, '×')
                ]);
              }).concat([
                React.createElement('button', {
                  onClick: () => {
                    if (attr.key === 'skillExamples') {
                      handleAddListItem(setSkillExamplesList, skillExamplesList);
                    } else if (attr.key === 'skillTags') {
                      handleAddListItem(setSkillTagsList, skillTagsList);
                    } else if (attr.key === 'defaultInputModes') {
                      handleAddListItem(setInputModesList, inputModesList);
                    } else if (attr.key === 'defaultOutputModes') {
                      handleAddListItem(setOutputModesList, outputModesList);
                    } else if (attr.key === 'servers') {
                      handleAddListItem(setServersList, serversList);
                    } else if (attr.key === 'authors') {
                      handleAddListItem(setAuthorsList, authorsList);
                    }
                  },
                  style: {
                    marginTop: '8px',
                    padding: '4px 8px',
                    backgroundColor: 'var(--primary)',
                    color: 'white',
                    border: 'none',
                    borderRadius: '4px',
                    cursor: 'pointer'
                  }
                }, '+ Add ' + (attr.key === 'skillExamples' ? 'Example' : (attr.key === 'defaultInputModes' ? 'Input Mode' : (attr.key === 'defaultOutputModes' ? 'Output Mode' : 'Tag'))))
              ])
            ) : React.createElement('input', {
              type: 'text',
              value: form[attr.key] || '',
              onChange: e => handleChange(e, attr.key),
              placeholder: attr.placeholder || ''
            })
          ]);
        }).filter(Boolean),
        React.createElement('div', {}, [
          React.createElement('button', {
            onClick: () => {
              console.log('Generate button clicked');
              generate();
            },
            style: {
              padding: '8px 16px',
              backgroundColor: 'var(--primary)',
              color: 'white',
              border: 'none',
              borderRadius: '4px',
              cursor: 'pointer',
              fontWeight: 'bold'
            }
          }, '⚙️ Generate OASF Record'),
          // Show validation error message if present
          error ? React.createElement('div', {
            className: 'error-message',
            style: {
              marginTop: '10px',
              padding: '10px',
              borderRadius: '4px',
              textAlign: 'left'
            }
          }, error) : null,
          React.createElement('div', {
            style: {
              marginTop: '10px',
              textAlign: 'center',
              fontSize: '14px'
            }
          }, [
            'Upload your agent card using ',
            React.createElement('a', {
              href: 'https://docs.agntcy.org/dir/scenarios/',
              target: '_blank',
              style: { textDecoration: 'underline', color: 'var(--primary)' }
            }, 'AGNTCY dirctl instructions'),
            ' to reference Agent Directory at ',
            React.createElement('a', {
              href: 'https://agent-directory.outshift.com/',
              target: '_blank',
              style: { textDecoration: 'underline', color: 'var(--primary)' }
            }, 'agent-directory.outshift.com')
          ])
        ]),
        React.createElement('div', {}, [
          React.createElement('pre', {
            style: { minHeight: '100px', border: '1px solid #ccc', padding: '10px' },
            dangerouslySetInnerHTML: { __html: output ? syntaxHighlight(output) : 'Click "Generate OASF Record" to see the output here.' }
          }),
          React.createElement('div', { style: { display: 'flex', gap: '10px', justifyContent: 'flex-end' } }, [
            React.createElement('button', { className: 'copy-btn', onClick: copyToClipboard }, '🖨️ Copy OASF Record'),
            React.createElement('button', {
              className: 'copy-btn',
              onClick: downloadJSON
            }, '⬇️ Download OASF Record')
          ])
        ]),
        React.createElement('footer', {
          style: {
            marginTop: '30px',
            textAlign: 'center',
            padding: '15px',
            borderTop: '1px solid rgba(0,0,0,0.1)',
            fontSize: '14px'
          }
        }, [
          React.createElement('p', {}, [
            '✨ Created with ',
            React.createElement('span', { style: { color: '#ff6b6b' } }, '❤️'),
            ' by ',
            React.createElement('a', {
              href: 'https://github.com/sriaradhyula',
              target: '_blank',
              style: { textDecoration: 'none' }
            }, '👨‍💻 sriaradhyula'),
            ' ✨'
          ]),
          React.createElement('p', { style: { marginTop: '10px' } }, [
            '🔍 Source code: ',
            React.createElement('a', {
              href: 'https://github.com/sriaradhyula/generate-agntcy-oasf-card',
              target: '_blank',
              style: { textDecoration: 'underline', color: 'var(--primary)' }
            }, 'github.com/sriaradhyula/generate-agntcy-oasf-card')
          ])
        ])
      ]);
    }

    ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(App));
  </script>
</body>
</html>