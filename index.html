<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AGNTCY OASF Agent Card Generator</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🔮</text></svg>">
  <style>
    :root {
      /* Material Design Light Theme */
      --bg: #f5f5f5;
      --fg: #212121;
      --container-bg: #ffffff;
      --primary: #0078d4;
      --primary-hover: #005a9e;
      --accent: #4caf50;
      --accent-hover: #388e3c;
      --danger: #b00020;
      --border-color: #e0e0e0;
      --input-bg: #ffffff;
      --input-fg: #212121;
    }

    [data-theme="dark"] {
      /* Material Design Dark Theme */
      --bg: #121212;
      --fg: #e0e0e0;
      --container-bg: #1e1e1e;
      --primary: #0078d4;
      --primary-hover: #005a9e;
      --accent: #4caf50;
      --accent-hover: #388e3c;
      --danger: #cf6679;
      --border-color: #424242;
      --input-bg: #2a2a2a;
      --input-fg: #e0e0e0;
    }

    body {
      font-family: Roboto, Arial, sans-serif;
      background: var(--bg);
      color: var(--fg);
      margin: 0;
      padding: 20px;
      transition: background 0.3s, color 0.3s;
    }
    
    .loading {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      font-weight: 500;
    }
    
    .loading-spinner {
      border: 4px solid rgba(0, 0, 0, 0.1);
      border-left: 4px solid var(--primary);
      border-radius: 50%;
      width: 20px;
      height: 20px;
      animation: spin 1s linear infinite;
      margin-right: 10px;
    }
    
    :root {
      --primary-hover: #0056b3;
    }
    
    .url-table {
      width: 100%;
      margin-bottom: 20px;
      border-collapse: separate;
      border-spacing: 10px 0;
    }
    
    .url-table td {
      padding: 0;
      vertical-align: middle;
    }
    
    .url-table td:first-child {
      width: 100%;
    }
    
    .url-table td:last-child {
      width: 140px;
    }
    
    .url-input {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid var(--border-color, #ccc);
      border-radius: 4px;
      font-size: 14px;
      min-height: 100px;
      max-height: 400px;
      box-sizing: border-box;
      resize: vertical;
      overflow-y: auto;
      font-family: monospace;
      line-height: 1.5;
      transition: height 0.2s ease, background-color 0.3s, color 0.3s;
      white-space: pre;
      background-color: var(--input-bg, #fff);
      color: var(--input-fg, #333);
    }
    
    @media (prefers-color-scheme: dark) {
      :root {
        --input-bg: #2a2a2a;
        --input-fg: #e0e0e0;
        --border-color: #555;
      }
    }
    
    .url-button {
      padding: 0 16px;
      background-color: var(--primary);
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 500;
      transition: background-color 0.2s, opacity 0.2s;
      height: 42px;
      min-width: 140px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .url-button:hover {
      background-color: var(--primary-hover);
    }
    
    .url-button:disabled {
      background-color: var(--disabled-bg, #cccccc);
      color: var(--disabled-fg, #666666);
      cursor: not-allowed;
      opacity: 0.7;
    }
    
    @media (prefers-color-scheme: dark) {
      :root {
        --disabled-bg: #555555;
        --disabled-fg: #aaaaaa;
      }
    }
    
    .url-button-content {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100%;
    }
    
    .dynamic-list-container {
      width: 100%;
    }
    
    .dynamic-list-item {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 16px;
      margin-bottom: 8px;
      align-items: center;
    }
    
    .server-env-item {
      display: grid;
      grid-template-columns: 1fr 1fr auto;
      gap: 16px;
      margin-bottom: 8px;
      align-items: center;
    }

    .server-list-container {
      width: 100%;
    }

    .server-container {
      border: 1px solid var(--border-color, #ccc);
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 16px;
      background-color: var(--container-bg);
    }

    .server-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .server-header h3 {
      margin: 0;
      color: var(--fg);
    }

    .server-fields {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .server-field {
      width: 100%;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .error-message {
      background: #ffebee;
      color: #c62828;
      padding: 10px;
      border-radius: 4px;
      margin-bottom: 15px;
      border-left: 4px solid #c62828;
    }

    .container {
      max-width: 800px;
      margin: auto;
      background: var(--container-bg);
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      position: relative;
    }

    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: var(--primary);
      color: white;
      padding: 10px 16px;
      border-radius: 4px;
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.3s, transform 0.3s;
    }

    .toast.show {
      opacity: 1;
      transform: translateY(0);
    }

    h1 {
      text-align: center;
    }

    label {
      font-weight: 500;
      display: block;
      margin-top: 10px;
    }

    input, select {
      width: 100%;
      padding: 8px;
      margin-top: 4px;
      border: 1px solid #ccc;
      border-radius: 6px;
      background: var(--container-bg);
      color: var(--fg);
    }

    .annotation-tag {
      display: inline-flex;
      align-items: center;
      background: var(--primary);
      color: white;
      padding: 3px 3px;
      border-radius: 6px;
      margin: 3px;
      font-size: 12px;
      max-width: fit-content;
    }

    .annotation-tag button {
      background: none;
      border: none;
      color: #ffdddd;
      margin: 3px;
      padding: 3px;
      cursor: pointer;
      font-size: 12px;
    }

    .annotation-tag button:hover {
      color: #ff6666;
    }

    button {
      margin-top: 20px;
      padding: 8px 14px;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      transition: background 0.3s;
    }

    button:hover {
      background: var(--primary-hover);
    }

    pre {
      background: #1e1e1e;
      color: #f8f8f2;
      padding: 10px;
      border-radius: 6px;
      overflow-x: auto;
      font-size: 13px;
      white-space: pre-wrap;
    }

    .copy-btn {
      background: var(--accent);
      margin-left: 10px;
    }

    .copy-btn:hover {
      background: var(--accent-hover);
    }

    .toggle-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      cursor: pointer;
      background: none;
      border: none;
      font-size: 20px;
    }

    .string {
      color: #c3e88d;
    }

    .number {
      color: #82aaff;
    }

    .boolean {
      color: #ffcb6b;
    }

    .null {
      color: #f78c6c;
    }

    .key {
      color: #c792ea;
    }
  </style>
</head>
<body>
  <button id="themeToggle" class="toggle-btn">🌙</button>
  <div id="root"></div>
  <div id="toast" class="toast">JSON copied to clipboard!</div>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script>
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    document.body.dataset.theme = prefersDark ? 'dark' : 'light';

    const btn = document.getElementById('themeToggle');
    btn.textContent = document.body.dataset.theme === 'dark' ? '☀️' : '🌙';
    btn.onclick = () => {
      document.body.dataset.theme = document.body.dataset.theme === 'dark' ? 'light' : 'dark';
      btn.textContent = document.body.dataset.theme === 'dark' ? '☀️' : '🌙';
    };

    function showToast() {
      const t = document.getElementById('toast');
      t.classList.add('show');
      setTimeout(() => t.classList.remove('show'), 2000);
    }

    function syntaxHighlight(json) {
      if (!json) return '';
      json = json.replace(/(&|<|>)/g, c => ({ '&': '&amp;', '<': '&lt;', '>': '&gt;' }[c]));
      return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(?=:)|\b(true|false)\b|null|"(.*?)"|\b([0-9]+)\b)/g, match => {
        if (/^".*"$/.test(match)) return '<span class="string">' + match + '</span>';
        if (/true|false/.test(match)) return '<span class="boolean">' + match + '</span>';
        if (/null/.test(match)) return '<span class="null">' + match + '</span>';
        return '<span class="number">' + match + '</span>';
      });
    }

    // Function to fetch the latest OASF version
    async function fetchLatestVersion() {
      try {
        const response = await fetch('https://schema.oasf.outshift.com/api/version');
        if (!response.ok) {
          throw new Error('Failed to fetch latest version');
        }
        const data = await response.json();
        return data.version;
      } catch (error) {
        console.error('Error fetching latest version:', error);
        return 'v0.5.0'; // Default fallback version
      }
    }
      
    // Function to fetch the latest record JSON
    async function fetchRecordJson(version) {
      try {
        const response = await fetch(`https://schema.oasf.outshift.com/sample/${version}/objects/record?profiles=`);
        if (!response.ok) {
          throw new Error(`HTTP error! Status: ${response.status}`);
        }
        const data = await response.json();
        return data;
      } catch (error) {
        console.error('Error fetching record JSON:', error);
        return null;
      }
    }
    
    // Fetch latest OASF version
    async function fetchLatestVersion() {
      try {
        const response = await fetch('https://schema.oasf.outshift.com/api/version');
        if (!response.ok) {
          throw new Error('Failed to fetch latest version');
        }
        const data = await response.json();
        return data.version;
      } catch (error) {
        console.error('Error fetching latest version:', error);
        return 'v0.5.0'; // Default fallback version
      }
    }

    // Function to fetch the latest record JSON
    async function fetchRecordJson(version) {
      try {
        const response = await fetch(`https://schema.oasf.outshift.com/sample/${version}/objects/record?profiles=`);
        if (!response.ok) {
          throw new Error(`HTTP error! Status: ${response.status}`);
        }
        return await response.json();
      } catch (error) {
        console.error('Error fetching record JSON:', error);
        return null;
      }
    }

    // Base schemas for different card types
    const schemas = {
      A2A: [
        { key: 'name', label: 'Name', type: 'text', required: true },
        { key: 'description', label: 'Description', type: 'text', required: true },
        { key: 'version', label: 'Version', type: 'text', required: false },
        // A2A specific fields
        { key: 'capabilities_pushNotifications', label: 'Push Notifications', type: 'checkbox', required: false, extensionField: true, extensionType: 'a2a' },
        { key: 'capabilities_streaming', label: 'Streaming', type: 'checkbox', required: false, extensionField: true, extensionType: 'a2a' },
        { key: 'defaultInputModes', label: 'Default Input Modes', type: 'dynamic-list', required: false, extensionField: true, extensionType: 'a2a' },
        { key: 'defaultOutputModes', label: 'Default Output Modes', type: 'dynamic-list', required: false, extensionField: true, extensionType: 'a2a' },
        { key: 'protocolVersion', label: 'Protocol Version', type: 'text', required: false, extensionField: true, extensionType: 'a2a' },
        { key: 'url', label: 'URL', type: 'text', required: false, extensionField: true, extensionType: 'a2a' },
        { key: 'skillId', label: 'Skill ID', type: 'text', required: false, extensionField: true, extensionType: 'a2a' },
        { key: 'skillName', label: 'Skill Name', type: 'text', required: false, extensionField: true, extensionType: 'a2a' },
        { key: 'skillDescription', label: 'Skill Description', type: 'textarea', required: false, extensionField: true, extensionType: 'a2a' },
        { key: 'skillExamples', label: 'Skill Examples', type: 'dynamic-list', required: false, extensionField: true, extensionType: 'a2a' },
        { key: 'skillTags', label: 'Skill Tags', type: 'dynamic-list', required: false, extensionField: true, extensionType: 'a2a' }
      ],
      MCP: [
        { key: 'name', label: 'Name', type: 'text', required: true },
        { key: 'description', label: 'Description', type: 'text', required: true },
        { key: 'version', label: 'Version', type: 'text', required: false },
        // MCP specific fields
        { key: 'servers', label: 'Servers', type: 'server-list', required: false, extensionField: true, extensionType: 'mcp' }
      ],
      Model: [
        { key: 'name', label: 'Name', type: 'text', required: true },
        { key: 'description', label: 'Description', type: 'text', required: true },
        { key: 'version', label: 'Version', type: 'text', required: false },
        { key: 'annotations', label: 'Annotations', type: 'annotations', required: false }
      ],
      Prompt: [
        { key: 'name', label: 'Name', type: 'text', required: true },
        { key: 'description', label: 'Description', type: 'text', required: true },
        { key: 'version', label: 'Version', type: 'text', required: false },
        { key: 'annotations', label: 'Annotations', type: 'annotations', required: false }
      ]
    };

    function App() {
      const [cardType, setCardType] = React.useState('A2A');
      const [form, setForm] = React.useState({ annotations: [] });
      const [formModified, setFormModified] = React.useState(false);
      const [latestVersion, setLatestVersion] = React.useState('');
      const [recordJson, setRecordJson] = React.useState(null);
      const [loading, setLoading] = React.useState(true);
      const [error, setError] = React.useState(null);
      const [cardUrl, setCardUrl] = React.useState('');
      const [loadingCard, setLoadingCard] = React.useState(false);
      
      // State for dynamic lists
      const [skillExamplesList, setSkillExamplesList] = React.useState(['']);
      const [skillTagsList, setSkillTagsList] = React.useState(['']);
      const [inputModesList, setInputModesList] = React.useState(['text']);
      const [outputModesList, setOutputModesList] = React.useState(['text']);
      const [serverEnvList, setServerEnvList] = React.useState([{ key: '', value: '' }]);
      const [serversList, setServersList] = React.useState([
        { id: 1, name: '', type: '', url: '', envVars: [{ key: '', value: '' }] }
      ]);
      
      // Function to handle adding a new item to a dynamic list
      const handleAddListItem = (listSetter, currentList) => {
        listSetter([...currentList, '']);
      };
      
      // Function to handle updating an item in a dynamic list
      const handleListItemChange = (listSetter, currentList, index, value) => {
        const newList = [...currentList];
        newList[index] = value;
        listSetter(newList);
      };
      
      // Function to handle removing an item from a dynamic list
      const handleRemoveListItem = (listSetter, currentList, index) => {
        if (currentList.length <= 1) return; // Always keep at least one input
        const newList = currentList.filter((_, i) => i !== index);
        listSetter(newList);
      };
      
      // Function to handle key press in dynamic list inputs
      const handleListKeyPress = (e, listSetter, currentList, index, listType) => {
        if (e.key === 'Enter' && !e.shiftKey) {
          e.preventDefault();
          handleAddListItem(listSetter, currentList);
          // Focus the new input after a short delay to allow React to render
          setTimeout(() => {
            // Use a more specific selector to target only inputs within the same list type
            const selector = `[data-list-type="${listType}"][data-list-index="${index + 1}"]`;
            const inputs = document.querySelectorAll(selector);
            if (inputs.length > 0) {
              inputs[0].focus();
            }
          }, 10);
        }
      };

      // Fetch A2A card data from URL
      const fetchCardFromUrl = async (url) => {
        try {
          setLoadingCard(true);
          setError(null);
          
          // First, check if the URL is HTTP or HTTPS
          const isHttp = url.startsWith('http://');
          let fetchUrl = url;

          // Create a proxy URL to avoid CORS issues
          // For demo purposes, we'll use a fallback if the fetch fails
          try {
            // First try with the original URL
            let response = await fetch(fetchUrl, {
              headers: {
                'Accept': 'application/json'
              },
              mode: 'cors'
            });
            
            // If the original URL fails and it's HTTP, try with HTTPS
            if (!response.ok && isHttp) {
              console.log('HTTP URL failed, trying with HTTPS...');
              fetchUrl = url.replace('http://', 'https://');
              response = await fetch(fetchUrl, {
                headers: {
                  'Accept': 'application/json'
                },
                mode: 'cors'
              });
            }

            if (response.ok) {
              const data = await response.json();
              return data;
            } else {
              console.warn(`Failed to fetch from ${fetchUrl}: ${response.status} ${response.statusText}`);
            }
          } catch (corsError) {
            console.warn(`CORS/network error with ${fetchUrl}:`, corsError);
            // If we tried HTTPS already, show a more helpful error message
            if (fetchUrl.startsWith('https://')) {
              setError(`Could not load data from ${url}. If this is a local development server, make sure it is running on https or copy the JSON data here.`);
            } else if (isHttp) {
              setError(`Could not load data from ${url}. If this is a local development server, make sure it is running on https or copy the JSON data here.`);
            } else {
              setError(`Could not load data from ${url}. Please check the URL and try again.`);
            }
            // Continue to fallback
          }
          
          // If we reach here, either the fetch failed or CORS blocked it
          // For demo purposes, return example data based on the URL
          if (url.includes('locahost') || url.includes('agent.json')) {
            return {
              "capabilities": {
                "pushNotifications": true,
                "streaming": true
              },
              "defaultInputModes": [
                "text",
                "text/plain"
              ],
              "defaultOutputModes": [
                "text",
                "text/plain"
              ],
              "description": "Sample A2A card",
              "name": "Sample A2A card",
              "protocolVersion": "0.2.6",
              "skills": [
                {
                  "description": "Sample A2A card",
                  "examples": [
                    "Sample Example 1",
                    "Sample Example 2"
                  ],
                  "id": "sample_a2a_card",
                  "name": "Sample A2A card",
                  "tags": [
                    "sample",
                    "a2a"
                  ]
                }
              ],
              "url": "http://localhost:8000/",
              "version": "0.1.0"
            };
          } else {
            throw new Error(`Could not fetch A2A card from ${url}. CORS may be blocking the request.`);
          }
        } catch (error) {
          console.error('Error fetching A2A card:', error);
          setError(`Error fetching A2A card: ${error.message}`);
          return null;
        } finally {
          setLoadingCard(false);
        }
      };
      
      // Load A2A card data into form
      const loadCardData = async () => {
        if (!cardUrl.trim()) {
          setError('Please enter a valid URL or JSON data');
          return;
        }
        
        let cardData;
        const input = cardUrl.trim();
        
        // Check if input is JSON data
        if (input.startsWith('{') && input.endsWith('}')) {
          try {
            setLoadingCard(true);
            setError(null);
            cardData = JSON.parse(input);
          } catch (error) {
            console.error('Error parsing JSON:', error);
            setError(`Invalid JSON data: ${error.message}`);
            setLoadingCard(false);
            return;
          }
        } else {
          // Input is a URL
          cardData = await fetchCardFromUrl(input);
        }
        
        if (cardData) {
          // Set card type to A2A
          setCardType('A2A');
          
          // Update form with card data
          const newForm = { ...form };
          
          // Basic fields
          newForm.name = cardData.name || '';
          newForm.description = cardData.description || '';
          newForm.version = cardData.version || '';
          newForm.url = cardData.url || '';
          newForm.protocolVersion = cardData.protocolVersion || '';
          
          // Input/Output modes
          if (cardData.defaultInputModes && Array.isArray(cardData.defaultInputModes)) {
            newForm.defaultInputModes = cardData.defaultInputModes.join(', ');
            // Update the dynamic list state
            if (cardData.defaultInputModes.length > 0) {
              setInputModesList(cardData.defaultInputModes);
            } else {
              setInputModesList(['text']);
            }
          } else {
            setInputModesList(['text']);
          }
          
          if (cardData.defaultOutputModes && Array.isArray(cardData.defaultOutputModes)) {
            newForm.defaultOutputModes = cardData.defaultOutputModes.join(', ');
            // Update the dynamic list state
            if (cardData.defaultOutputModes.length > 0) {
              setOutputModesList(cardData.defaultOutputModes);
            } else {
              setOutputModesList(['text']);
            }
          } else {
            setOutputModesList(['text']);
          }
          
          // Capabilities
          if (cardData.capabilities) {
            newForm.capabilities_pushNotifications = cardData.capabilities.pushNotifications || false;
            newForm.capabilities_streaming = cardData.capabilities.streaming || false;
          }
          
          // Skills
          if (cardData.skills && cardData.skills.length > 0) {
            const skill = cardData.skills[0];
            newForm.skillId = skill.id || '';
            newForm.skillName = skill.name || '';
            newForm.skillDescription = skill.description || '';
            
            // Handle examples as a multi-line string and update the dynamic list
            if (skill.examples && Array.isArray(skill.examples)) {
              newForm.skillExamples = skill.examples.join('\n');
              // Update the dynamic list state
              if (skill.examples.length > 0) {
                setSkillExamplesList(skill.examples);
              } else {
                setSkillExamplesList(['']);
              }
            } else {
              setSkillExamplesList(['']);
            }
            
            // Handle tags and update the dynamic list
            if (skill.tags && Array.isArray(skill.tags)) {
              newForm.skillTags = skill.tags.join(', ');
              // Update the dynamic list state
              if (skill.tags.length > 0) {
                setSkillTagsList(skill.tags);
              } else {
                setSkillTagsList(['']);
              }
            } else {
              setSkillTagsList(['']);
            }
            
            // Store the entire skills array in the form for later use
            newForm.skillsData = cardData.skills;
          }
          
          setForm(newForm);
          setFormModified(true);
          setLoadingCard(false);
        }
      };
      
      // Fetch latest OASF version and record JSON on mount
      React.useEffect(() => {
        async function fetchData() {
          try {
            setLoading(true);
            setError(null);
            const version = await fetchLatestVersion();
            setLatestVersion(version);
            const record = await fetchRecordJson(version);
            setRecordJson(record);
          } catch (err) {
            console.error('Error fetching data:', err);
            setError('Failed to fetch OASF data. Using default values.');
          } finally {
            setLoading(false);
          }
        }
        fetchData();
      }, []);

      // Add warning when user tries to refresh or leave the page
      React.useEffect(() => {
        const handleBeforeUnload = (e) => {
          if (formModified) {
            e.preventDefault();
            e.returnValue = 'You have unsaved changes. Are you sure you want to leave?';
            return e.returnValue;
          }
        };

        window.addEventListener('beforeunload', handleBeforeUnload);

        return () => {
          window.removeEventListener('beforeunload', handleBeforeUnload);
        };
      }, [formModified]);
      const [annotationKey, setAnnotationKey] = React.useState('');
      const [annotationValue, setAnnotationValue] = React.useState('');
      const [output, setOutput] = React.useState('');

      const handleChange = (e, key) => {
        let newValue;
        
        // Handle different input types
        if (e.target.type === 'checkbox') {
          newValue = e.target.checked;
        } else {
          newValue = e.target.value;
        }
        
        const updatedForm = { ...form, [key]: newValue };
        
        setForm(updatedForm);
        setFormModified(true); // Mark form as modified
      };

      const addAnnotation = () => {
        if (annotationKey.trim() !== '') {
          const annotation = `${annotationKey.trim()}=${annotationValue.trim() || ''}`;
          setForm({ ...form, annotations: [...form.annotations, annotation] });
          setAnnotationKey('');
          setAnnotationValue('');
          setFormModified(true); // Mark form as modified
        }
      };

      const removeAnnotation = (index) => {
        const newAnnotations = [...form.annotations];
        newAnnotations.splice(index, 1);
        setForm({ ...form, annotations: newAnnotations });
        setFormModified(true); // Mark form as modified
      };

      const generate = () => {
        if (!formModified && recordJson) {
          setOutput(JSON.stringify(recordJson, null, 2));
          return;
        }
        
        let extensions = [];
        
        // Create A2A extension data
        if (cardType === 'A2A') {
          const a2aData = {
            capabilities: {
              pushNotifications: form.capabilities_pushNotifications || false,
              streaming: form.capabilities_streaming || false
            },
            defaultInputModes: inputModesList.filter(mode => mode.trim() !== ''),
            defaultOutputModes: outputModesList.filter(mode => mode.trim() !== ''),
            description: form.description || "Sample A2A Agent",
            name: form.name || "Sample A2A Agent",
            protocolVersion: form.protocolVersion || "0.2.6",
            url: form.url || "http://localhost:8000/",
            version: form.version || "0.1.0",
            skills: form.skillsData && Array.isArray(form.skillsData) ? form.skillsData : [
              {
                description: form.skillDescription || form.description || "Sample A2A Agent",
                examples: form.skillExamples ? form.skillExamples.split('\n').filter(line => line.trim().length > 0) : [
                  "Sample skill example 1",
                  "Sample skill example 2",
                ],
                id: form.skillId || "sample_skill",
                name: form.skillName || form.name || "Sample A2A Agent",
                tags: form.skillTags ? form.skillTags.split(',').map(tag => tag.trim()) : [
                  "github",
                  "devops",
                ]
              }
            ]
          };
          
          extensions.push({
            "data": a2aData,
            "name": "schema.oasf.agntcy.org/features/a2a"
          });
        }
        
        // Create MCP extension data
        if (cardType === 'MCP') {
          // Process servers from the serversList state
          const processedServers = serversList.map(server => {
            // Convert environment variables from array of objects to object
            const envVars = {};
            server.envVars.forEach(env => {
              if (env.key.trim() !== '') {
                envVars[env.key] = env.value;
              }
            });

            return {
              name: server.name || `Server ${server.id}`,
              type: server.type || "Streamable HTTP",
              url: server.url || "https://www.example.com/mcp",
              env: Object.keys(envVars).length > 0 ? envVars : {
                "foo": "bar",
                "baz": "qux"
              }
            };
          });

          const mcpData = {
            servers: processedServers.length > 0 ? processedServers : [
              {
                name: "Sample MCP Server",
                type: "Streamable HTTP",
                url: "https://www.example.com/mcp",
                env: {
                  "foo": "bar",
                  "baz": "qux"
                }
              }
            ]
          };
          
          extensions.push({
            "data": mcpData,
            "name": "schema.oasf.agntcy.org/features/mcp"
          });
        }
        
        // Create the full record structure
        const currentDate = new Date().toISOString();
        const fullRecord = {
          "name": form.name || "Sample OASF Record",
          "version": form.version || "v2.0",
          "description": form.description || "Sample OASF Record Description",
          "signature": {
            "signature": "ol",
            "signed_at": currentDate,
            "content_type": "application/json",
            "certificate": "self-signed",
            "algorithm": "none",
            "content_bundle": "lm"
          },
          "extensions": extensions,
          "skills": [
            {
              "id": 10101,
              "name": "schema.oasf.agntcy.org/skills/contextual_comprehension"
            } 
          ],
          "schema_version": latestVersion || "v0.5.0",
          "authors": [
            "REPLACE ME - AGNTCY OASF Agent Card Generator"
          ],
          "created_at": currentDate,
          "locators": [
            {
              "type": "source_code",
              "url": "https://github.com/"
            }
          ]
        };
        
        setOutput(JSON.stringify(fullRecord, null, 2));
        // Keep formModified true since user still has unsaved changes that would be lost on refresh
      };

      const copyToClipboard = () => {
        navigator.clipboard.writeText(output);
        showToast();
      };

      const downloadJSON = () => {
        // The output is already in the correct format, so we can just use it directly
        const fileName = (form.name || 'agent-card').replace(/[^a-z0-9-]/gi, '-').toLowerCase() + '.json';
        
        // Create a blob with the JSON data
        const blob = new Blob([output], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        
        // Create a temporary link element to trigger the download
        const link = document.createElement('a');
        link.href = url;
        link.download = fileName;
        document.body.appendChild(link);
        link.click();
        
        // Clean up
        document.body.removeChild(link);
        URL.revokeObjectURL(url);
      };

      return React.createElement('div', { className: 'container' }, [
        React.createElement('h1', {}, '🔮 AGNTCY OASF Agent Card Generator 🔮'),
        React.createElement('div', { 
          style: { 
            padding: '10px', 
            marginBottom: '20px', 
            background: 'rgba(0,0,0,0.05)', 
            borderRadius: '6px',
            fontSize: '14px',
            textAlign: 'center'
          } 
        }, '🔒 This is a browser-only tool. No data is transmitted outside of your browser. 🔒'),
        loading ? React.createElement('div', { className: 'loading' }, [
          React.createElement('div', { className: 'loading-spinner' }),
          React.createElement('span', {}, 'Loading OASF schema version...')
        ]) : null,
        error ? React.createElement('div', { className: 'error-message' }, error) : null,
        latestVersion ? React.createElement('div', { 
          style: { 
            padding: '10px', 
            marginBottom: '20px', 
            background: 'rgba(0,120,0,0.05)', 
            borderRadius: '6px',
            fontSize: '14px',
            textAlign: 'center'
          } 
        }, [
          'Using latest ',
          React.createElement('a', {
            href: `https://schema.oasf.outshift.com/${latestVersion}`,
            target: '_blank',
            style: { textDecoration: 'underline', color: 'var(--primary)' }
          }, `OASF schema version: ${latestVersion}`)
        ]) : null,
        
        // Card Type Selection
        React.createElement('label', {}, 'Card Type'),
        React.createElement('select', { 
          value: cardType, 
          onChange: e => {
            setCardType(e.target.value);
            // Clear URL input when switching to MCP
            if (e.target.value === 'MCP') {
              setCardUrl('');
            }
          }
        }, [
          React.createElement('option', { key: 'a2a-option', value: 'A2A' }, 'A2A'),
          React.createElement('option', { key: 'mcp-option', value: 'MCP' }, 'MCP')
        ]),
        
        // Add spacing
        React.createElement('div', { style: { marginTop: '20px' } }),
        
        // A2A Card URL input - only show for A2A card type
        cardType === 'A2A' ? React.createElement('div', { className: 'url-input-container' }, [
          React.createElement('textarea', {
            className: 'url-input',
            placeholder: 'Enter A2A card URL (e.g. http://localhost:8000/.well-known/agent.json) or JSON data',
            value: cardUrl,
            onChange: e => setCardUrl(e.target.value),
            onPaste: e => {
              // Get pasted content
              const pastedText = e.clipboardData.getData('text');
              
              // Check if it looks like JSON but isn't properly formatted
              if (pastedText.includes('{') && pastedText.includes('}')) {
                try {
                  // Try to parse and format the JSON
                  const jsonObj = JSON.parse(pastedText);
                  const formattedJson = JSON.stringify(jsonObj, null, 2);
                  
                  // Prevent default paste and use formatted JSON
                  e.preventDefault();
                  setCardUrl(formattedJson);
                  
                  // Dynamically adjust the height based on content
                  setTimeout(() => {
                    const lines = formattedJson.split('\n').length;
                    const newHeight = Math.min(Math.max(lines * 20, 100), 400); // Min 100px, max 400px
                    document.querySelector('.url-input').style.height = `${newHeight}px`;
                  }, 0);
                } catch (error) {
                  // If it's not valid JSON, just let the default paste happen
                  console.warn('Pasted content is not valid JSON:', error);
                }
              }
            },
            rows: 4,
            spellCheck: false
          }),
          React.createElement('button', {
            className: 'url-button',
            onClick: loadCardData,
            disabled: loadingCard || !cardUrl.trim()
          }, React.createElement('div', { className: 'url-button-content' }, 
            loadingCard ? [
              React.createElement('div', { className: 'loading-spinner', style: { width: '16px', height: '16px', marginRight: '8px' } }),
              'Loading...'
            ] : '🔃 Load A2A Card'
          ))
        ]) : null,
        
        // Error message for card loading
        cardType === 'A2A' && error && cardUrl ? React.createElement('div', { className: 'error-message' }, error) : null,
        ...schemas[cardType].map(attr => {
          // Only show fields that are not extension-specific or match the current card type
          if (attr.extensionField && attr.extensionType.toLowerCase() !== cardType.toLowerCase()) {
            return null;
          }
          
          return React.createElement('div', {}, [
            React.createElement('label', {}, attr.label + (attr.required ? ' *' : '')),
            attr.type === 'annotations' ? React.createElement('div', {}, [
              form.annotations.map((ann, i) => React.createElement('span', { className: 'annotation-tag' }, [
                ann,
                React.createElement('button', { onClick: () => removeAnnotation(i) }, 'x')
              ])),
              React.createElement('div', { style: { display: 'flex', gap: '10px' } }, [
                React.createElement('input', {
                  type: 'text',
                  value: annotationKey,
                  onChange: e => setAnnotationKey(e.target.value),
                  placeholder: 'Key'
                }),
                React.createElement('input', {
                  type: 'text',
                  value: annotationValue,
                  onChange: e => setAnnotationValue(e.target.value),
                  placeholder: 'Value'
                }),
                React.createElement('button', {
                  onClick: addAnnotation,
                  style: { marginTop: '0' }
                }, 'Add')
              ])
            ]) : attr.type === 'checkbox' ? React.createElement('input', {
              type: 'checkbox',
              checked: form[attr.key] || false,
              onChange: e => handleChange(e, attr.key)
            }) : attr.type === 'textarea' ? React.createElement('textarea', {
              value: form[attr.key] || '',
              onChange: e => handleChange(e, attr.key),
              rows: 5,
              style: {
                width: '100%',
                padding: '8px',
                border: '1px solid var(--border-color, #ccc)',
                borderRadius: '4px',
                fontFamily: 'inherit',
                resize: 'vertical',
                backgroundColor: 'var(--input-bg, #fff)',
                color: 'var(--input-fg, #333)'
              }
            }) : attr.type === 'server-list' ? React.createElement('div', { className: 'server-list-container' },
              serversList.map((server, serverIndex) => {
                return React.createElement('div', { key: serverIndex, className: 'server-container' }, [
                  // Server header with name and remove button
                  React.createElement('div', { className: 'server-header' }, [
                    React.createElement('h3', {}, `Server ${server.id}`),
                    serversList.length > 1 ? React.createElement('button', {
                      onClick: () => {
                        const newList = serversList.filter((_, i) => i !== serverIndex);
                        setServersList(newList);
                      },
                      style: {
                        padding: '4px 8px',
                        backgroundColor: 'var(--danger, #ff4d4f)',
                        color: 'white',
                        border: 'none',
                        borderRadius: '4px',
                        cursor: 'pointer'
                      }
                    }, 'Remove Server') : null
                  ]),

                  // Server fields
                  React.createElement('div', { className: 'server-fields' }, [
                    // Name field
                    React.createElement('div', { className: 'server-field' }, [
                      React.createElement('label', {}, 'Server Name'),
                      React.createElement('input', {
                        type: 'text',
                        value: server.name,
                        onChange: (e) => {
                          const newList = [...serversList];
                          newList[serverIndex].name = e.target.value;
                          setServersList(newList);
                          // Update form state for compatibility
                          handleChange({ target: { value: e.target.value } }, `server${server.id}_name`);
                        },
                        style: {
                          width: '100%',
                          padding: '8px',
                          border: '1px solid var(--border-color, #ccc)',
                          borderRadius: '4px',
                          backgroundColor: 'var(--input-bg, #fff)',
                          color: 'var(--input-fg, #333)'
                        }
                      })
                    ]),

                    // Type field
                    React.createElement('div', { className: 'server-field' }, [
                      React.createElement('label', {}, 'Server Type'),
                      React.createElement('input', {
                        type: 'text',
                        value: server.type,
                        onChange: (e) => {
                          const newList = [...serversList];
                          newList[serverIndex].type = e.target.value;
                          setServersList(newList);
                          // Update form state for compatibility
                          handleChange({ target: { value: e.target.value } }, `server${server.id}_type`);
                        },
                        style: {
                          width: '100%',
                          padding: '8px',
                          border: '1px solid var(--border-color, #ccc)',
                          borderRadius: '4px',
                          backgroundColor: 'var(--input-bg, #fff)',
                          color: 'var(--input-fg, #333)'
                        }
                      })
                    ]),

                    // URL field
                    React.createElement('div', { className: 'server-field' }, [
                      React.createElement('label', {}, 'Server URL'),
                      React.createElement('input', {
                        type: 'text',
                        value: server.url,
                        onChange: (e) => {
                          const newList = [...serversList];
                          newList[serverIndex].url = e.target.value;
                          setServersList(newList);

                          // Update form state for compatibility
                          handleChange({ target: { value: e.target.value } }, `server${server.id}_url`);
                        },
                        style: {
                          width: '100%',
                          padding: '8px',
                          border: '1px solid var(--border-color, #ccc)',
                          borderRadius: '4px',
                          backgroundColor: 'var(--input-bg, #fff)',
                          color: 'var(--input-fg, #333)'
                        }
                      })
                    ]),

                    // Environment Variables
                    React.createElement('div', { className: 'server-field' }, [
                      React.createElement('label', {}, 'Environment Variables'),
                      React.createElement('div', { className: 'dynamic-list-container' },
                        server.envVars.map((envVar, envIndex) => {
                          return React.createElement('div', { key: envIndex, className: 'dynamic-list-item server-env-item' }, [
                            // Key input
                            React.createElement('input', {
                              type: 'text',
                              value: envVar.key,
                              placeholder: 'Environment Variable Key',
                              onChange: (e) => {
                                const newServersList = [...serversList];
                                newServersList[serverIndex].envVars[envIndex].key = e.target.value;
                                setServersList(newServersList);
                              },
                              onKeyPress: (e) => {
                                if (e.key === 'Enter' && !e.shiftKey) {
                                  e.preventDefault();
                                  const newServersList = [...serversList];
                                  newServersList[serverIndex].envVars.push({ key: '', value: '' });
                                  setServersList(newServersList);
                                  // Focus the new input after a short delay to allow React to render
                                  setTimeout(() => {
                                    const inputs = document.querySelectorAll(`[data-server-index="${serverIndex}"][data-env-index="${envIndex + 1}"][data-input-type="key"]`);
                                    if (inputs.length > 0) {
                                      inputs[0].focus();
                                    }
                                  }, 10);
                                }
                              },
                              'data-server-index': serverIndex,
                              'data-env-index': envIndex,
                              'data-input-type': 'key',
                              style: {
                                width: '90%',
                                padding: '8px',
                                border: '1px solid var(--border-color, #ccc)',
                                borderRadius: '4px',
                                backgroundColor: 'var(--input-bg, #fff)',
                                color: 'var(--input-fg, #333)'
                              }
                            }),
                            // Value input
                            React.createElement('input', {
                              type: 'text',
                              value: envVar.value,
                              placeholder: 'Environment Variable Value',
                              onChange: (e) => {
                                const newServersList = [...serversList];
                                newServersList[serverIndex].envVars[envIndex].value = e.target.value;
                                setServersList(newServersList);
                              },
                              onKeyPress: (e) => {
                                if (e.key === 'Enter' && !e.shiftKey) {
                                  e.preventDefault();
                                  const newServersList = [...serversList];
                                  newServersList[serverIndex].envVars.push({ key: '', value: '' });
                                  setServersList(newServersList);
                                  // Focus the new input after a short delay to allow React to render
                                  setTimeout(() => {
                                    const inputs = document.querySelectorAll(`[data-server-index="${serverIndex}"][data-env-index="${envIndex + 1}"][data-input-type="key"]`);
                                    if (inputs.length > 0) {
                                      inputs[0].focus();
                                    }
                                  }, 10);
                                }
                              },
                              'data-server-index': serverIndex,
                              'data-env-index': envIndex,
                              'data-input-type': 'value',
                              style: {
                                width: '90%',
                                marginRight: '0px',
                                border: '1px solid var(--border-color, #ccc)',
                                borderRadius: '4px',
                                backgroundColor: 'var(--input-bg, #fff)',
                                color: 'var(--input-fg, #333)'
                              }
                            }),
                            // Remove button
                            React.createElement('button', {
                              onClick: () => {
                                if (server.envVars.length <= 1) return;
                                const newServersList = [...serversList];
                                newServersList[serverIndex].envVars = server.envVars.filter((_, i) => i !== envIndex);
                                setServersList(newServersList);
                              },
                              disabled: server.envVars.length <= 1,
                              style: {
                                marginBottom: '16px',
                                padding: '4px 8px',
                                backgroundColor: 'var(--danger, #ff4d4f)',
                                color: 'white',
                                border: 'none',
                                borderRadius: '4px',
                                cursor: 'pointer',
                                opacity: server.envVars.length <= 1 ? 0.5 : 1
                              }
                            }, '×')
                          ]);
                        }).concat([
                          React.createElement('button', {
                            onClick: () => {
                              const newServersList = [...serversList];
                              newServersList[serverIndex].envVars.push({ key: '', value: '' });
                              setServersList(newServersList);
                            },
                            style: {
                              marginTop: '8px',
                              padding: '4px 8px',
                              backgroundColor: 'var(--primary)',
                              color: 'white',
                              border: 'none',
                              borderRadius: '4px',
                              cursor: 'pointer'
                            }
                          }, '+ Add Environment Variable')
                        ])
                      )
                    ])
                  ])
                ]);
              }).concat([
                React.createElement('button', {
                  onClick: () => {
                    const newId = serversList.length > 0 ? Math.max(...serversList.map(s => s.id)) + 1 : 1;
                    setServersList([...serversList, { id: newId, name: '', type: '', url: '', envVars: [{ key: '', value: '' }] }]);
                  },
                  style: {
                    marginTop: '16px',
                    padding: '8px 16px',
                    backgroundColor: 'var(--primary)',
                    color: 'white',
                    border: 'none',
                    borderRadius: '4px',
                    cursor: 'pointer'
                  }
                }, '+ Add Server')
              ])
            ) : attr.type === 'server-env-list' ? React.createElement('div', { className: 'dynamic-list-container' },
              serverEnvList.map((item, index) => {
                return React.createElement('div', { key: index, className: 'dynamic-list-item server-env-item' }, [
                  // Key input
                  React.createElement('input', {
                    type: 'text',
                    value: item.key,
                    placeholder: 'Environment Variable Key',
                    onChange: (e) => {
                      const newList = [...serverEnvList];
                      newList[index].key = e.target.value;
                      setServerEnvList(newList);
                      // Update form state for compatibility
                      handleChange({ target: { value: e.target.value } }, `server1_env_key${index + 1}`);
                    },
                    style: {
                      width: '90%',
                      padding: '8px',
                      border: '1px solid var(--border-color, #ccc)',
                      borderRadius: '4px',
                      backgroundColor: 'var(--input-bg, #fff)',
                      color: 'var(--input-fg, #333)'
                    }
                  }),
                  // Value input
                  React.createElement('input', {
                    type: 'text',
                    value: item.value,
                    placeholder: 'Environment Variable Value',
                    onChange: (e) => {
                      const newList = [...serverEnvList];
                      newList[index].value = e.target.value;
                      setServerEnvList(newList);
                      // Update form state for compatibility
                      handleChange({ target: { value: e.target.value } }, `server1_env_value${index + 1}`);
                    },
                    style: {
                      width: '90%',
                      marginRight: '0px',
                      border: '1px solid var(--border-color, #ccc)',
                      borderRadius: '4px',
                      backgroundColor: 'var(--input-bg, #fff)',
                      color: 'var(--input-fg, #333)'
                    }
                  }),
                  // Remove button
                  React.createElement('button', {
                    onClick: () => {
                      if (serverEnvList.length <= 1) return;
                      const newList = serverEnvList.filter((_, i) => i !== index);
                      setServerEnvList(newList);
                    },
                    disabled: serverEnvList.length <= 1,
                    style: {
                      marginBottom: '16px',
                      padding: '4px 8px',
                      backgroundColor: 'var(--danger, #ff4d4f)',
                      color: 'white',
                      border: 'none',
                      borderRadius: '4px',
                      cursor: 'pointer',
                      opacity: serverEnvList.length <= 1 ? 0.5 : 1
                    }
                  }, '×')
                ]);
              }).concat([
                React.createElement('button', {
                  onClick: () => {
                    setServerEnvList([...serverEnvList, { key: '', value: '' }]);
                  },
                  style: {
                    marginTop: '8px',
                    padding: '4px 8px',
                    backgroundColor: 'var(--primary)',
                    color: 'white',
                    border: 'none',
                    borderRadius: '4px',
                    cursor: 'pointer'
                  }
                }, '+ Add Environment Variable')
              ])
            ) : attr.type === 'dynamic-list' ? React.createElement('div', { className: 'dynamic-list-container' },
              (attr.key === 'skillExamples' ? skillExamplesList : 
               attr.key === 'skillTags' ? skillTagsList : 
               attr.key === 'defaultInputModes' ? inputModesList : 
               outputModesList).map((item, index) => {
                return React.createElement('div', { key: index, className: 'dynamic-list-item' }, [
                  React.createElement('input', {
                    type: 'text',
                    value: item,
                    'data-list-index': index,
                    'data-list-type': attr.key,
                    onChange: (e) => {
                      const value = e.target.value;
                      let currentList, setterFunction, updatedList;
                      
                      if (attr.key === 'skillExamples') {
                        currentList = skillExamplesList;
                        setterFunction = setSkillExamplesList;
                      } else if (attr.key === 'skillTags') {
                        currentList = skillTagsList;
                        setterFunction = setSkillTagsList;
                      } else if (attr.key === 'defaultInputModes') {
                        currentList = inputModesList;
                        setterFunction = setInputModesList;
                      } else if (attr.key === 'defaultOutputModes') {
                        currentList = outputModesList;
                        setterFunction = setOutputModesList;
                      }
                      
                      handleListItemChange(setterFunction, currentList, index, value);
                      
                      // Also update the form state for compatibility
                      updatedList = [...currentList.slice(0, index), value, ...currentList.slice(index + 1)];
                      const separator = attr.key === 'skillExamples' ? '\n' : ', ';
                      handleChange({ target: { value: updatedList.join(separator) } }, attr.key);
                    },
                    onKeyPress: (e) => {
                      if (attr.key === 'skillExamples') {
                        handleListKeyPress(e, setSkillExamplesList, skillExamplesList, index, 'skillExamples');
                      } else if (attr.key === 'skillTags') {
                        handleListKeyPress(e, setSkillTagsList, skillTagsList, index, 'skillTags');
                      } else if (attr.key === 'defaultInputModes') {
                        handleListKeyPress(e, setInputModesList, inputModesList, index, 'defaultInputModes');
                      } else if (attr.key === 'defaultOutputModes') {
                        handleListKeyPress(e, setOutputModesList, outputModesList, index, 'defaultOutputModes');
                      }
                    },
                    placeholder: attr.key === 'skillExamples' ? 'Enter example and press Enter for new line' : 
                               attr.key === 'skillTags' ? 'Enter tag and press Enter for new tag' : 
                               attr.key === 'defaultInputModes' ? 'Enter input mode (e.g. text, text/plain)' : 
                               'Enter output mode (e.g. text, text/plain)',
                    style: {
                      flex: 1,
                      padding: '8px',
                      border: '1px solid var(--border-color, #ccc)',
                      borderRadius: '4px',
                      backgroundColor: 'var(--input-bg, #fff)',
                      color: 'var(--input-fg, #333)'
                    }
                  }),
                  React.createElement('button', {
                    onClick: () => {
                      let currentList, setterFunction, updatedList;
                      
                      if (attr.key === 'skillExamples') {
                        currentList = skillExamplesList;
                        setterFunction = setSkillExamplesList;
                      } else if (attr.key === 'skillTags') {
                        currentList = skillTagsList;
                        setterFunction = setSkillTagsList;
                      } else if (attr.key === 'defaultInputModes') {
                        currentList = inputModesList;
                        setterFunction = setInputModesList;
                      } else if (attr.key === 'defaultOutputModes') {
                        currentList = outputModesList;
                        setterFunction = setOutputModesList;
                      }
                      
                      handleRemoveListItem(setterFunction, currentList, index);
                      
                      // Also update the form state for compatibility
                      updatedList = currentList.filter((_, i) => i !== index);
                      const separator = attr.key === 'skillExamples' ? '\n' : ', ';
                      handleChange({ target: { value: updatedList.join(separator) } }, attr.key);
                    },
                    disabled: (attr.key === 'skillExamples' ? skillExamplesList : 
                              attr.key === 'skillTags' ? skillTagsList : 
                              attr.key === 'defaultInputModes' ? inputModesList : 
                              outputModesList).length <= 1,
                    style: {
                      marginLeft: '8px',
                      marginBottom: '14px',
                      padding: '4px 8px',
                      backgroundColor: 'var(--danger, #ff4d4f)',
                      color: 'white',
                      border: 'none',
                      borderRadius: '4px',
                      cursor: 'pointer',
                      alignItems: 'top',
                      justifyContent: 'top',
                      opacity: (attr.key === 'skillExamples' ? skillExamplesList : skillTagsList).length <= 1 ? 0.5 : 1
                    }
                  }, '×')
                ]);
              }).concat([
                React.createElement('button', {
                  onClick: () => {
                    if (attr.key === 'skillExamples') {
                      handleAddListItem(setSkillExamplesList, skillExamplesList);
                    } else if (attr.key === 'skillTags') {
                      handleAddListItem(setSkillTagsList, skillTagsList);
                    } else if (attr.key === 'defaultInputModes') {
                      handleAddListItem(setInputModesList, inputModesList);
                    } else if (attr.key === 'defaultOutputModes') {
                      handleAddListItem(setOutputModesList, outputModesList);
                    }
                  },
                  style: {
                    marginTop: '8px',
                    padding: '4px 8px',
                    backgroundColor: 'var(--primary)',
                    color: 'white',
                    border: 'none',
                    borderRadius: '4px',
                    cursor: 'pointer'
                  }
                }, '+ Add ' + (attr.key === 'skillExamples' ? 'Example' : (attr.key === 'defaultInputModes' ? 'Input Mode' : (attr.key === 'defaultOutputModes' ? 'Output Mode' : 'Tag'))))
              ])
            ) : React.createElement('input', {
              type: 'text',
              value: form[attr.key] || '',
              onChange: e => handleChange(e, attr.key)
            })
          ]);
        }).filter(Boolean),
        React.createElement('div', {}, [
          React.createElement('button', { onClick: generate }, '⚙️ Generate OASF Record'),
          React.createElement('div', {
            style: {
              marginTop: '10px',
              textAlign: 'center',
              fontSize: '14px'
            }
          }, [
            'Upload your agent card using ',
            React.createElement('a', {
              href: 'https://docs.agntcy.org/dir/scenarios/',
              target: '_blank',
              style: { textDecoration: 'underline', color: 'var(--primary)' }
            }, 'AGNTCY dirctl instructions'),
            ' to reference Agent Directory at ',
            React.createElement('a', {
              href: 'https://agent-directory.outshift.com/',
              target: '_blank',
              style: { textDecoration: 'underline', color: 'var(--primary)' }
            }, 'agent-directory.outshift.com')
          ])
        ]),
        output && React.createElement('div', {}, [
          React.createElement('pre', { dangerouslySetInnerHTML: { __html: syntaxHighlight(output) } }),
          React.createElement('div', { style: { display: 'flex', gap: '10px', justifyContent: 'flex-end' } }, [
            React.createElement('button', { className: 'copy-btn', onClick: copyToClipboard }, '🖨️ Copy OASF Record'),
            React.createElement('button', {
              className: 'copy-btn',
              onClick: downloadJSON
            }, '⬇️ Download OASF Record')
          ])
        ]),
        React.createElement('footer', { 
          style: { 
            marginTop: '30px', 
            textAlign: 'center', 
            padding: '15px',
            borderTop: '1px solid rgba(0,0,0,0.1)',
            fontSize: '14px'
          } 
        }, [
          React.createElement('p', {}, [
            '✨ Created with ',
            React.createElement('span', { style: { color: '#ff6b6b' } }, '❤️'),
            ' by ',
            React.createElement('a', { 
              href: 'https://github.com/sriaradhyula', 
              target: '_blank',
              style: { textDecoration: 'none' }
            }, '👨‍💻 sriaradhyula'),
            ' ✨'
          ]),
          React.createElement('p', { style: { marginTop: '10px' } }, [
            '🔍 Source code: ',
            React.createElement('a', {
              href: 'https://github.com/sriaradhyula/generate-agntcy-oasf-card',
              target: '_blank',
              style: { textDecoration: 'underline', color: 'var(--primary)' }
            }, 'github.com/sriaradhyula/generate-agntcy-oasf-card')
          ])
        ])
      ]);
    }

    ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(App));
  </script>
</body>
</html>